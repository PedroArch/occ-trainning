define(["knockout","promise","ccRestClient","jquery","pageLayout/cart","pubsub","ccConstants","ccLogger","viewportHelper","storageApi"],function(__WEBPACK_EXTERNAL_MODULE_9__,__WEBPACK_EXTERNAL_MODULE_10__,__WEBPACK_EXTERNAL_MODULE_11__,__WEBPACK_EXTERNAL_MODULE_13__,__WEBPACK_EXTERNAL_MODULE_14__,__WEBPACK_EXTERNAL_MODULE_15__,__WEBPACK_EXTERNAL_MODULE_16__,__WEBPACK_EXTERNAL_MODULE_18__,__WEBPACK_EXTERNAL_MODULE_19__,__WEBPACK_EXTERNAL_MODULE_29__){return function(n){function e(i){if(t[i])return t[i].exports;var c=t[i]={exports:{},id:i,loaded:!1};return n[i].call(c.exports,c,c.exports,e),c.loaded=!0,c.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(module,exports,__webpack_require__){eval("'use strict';\n\nvar _widgetCore = __webpack_require__(1);\n\nvar _viewModels = __webpack_require__(31);\n\nvar allViewModels = _interopRequireWildcard(_viewModels);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * We're using commonjs here because we don't have control\n * of the widget importation.\n */\nmodule.exports = (0, _widgetCore.widgetLoader)(allViewModels);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvd2lkZ2V0cy9vYmplY3RlZGdlL29lVmFsbW9yUlZQTWFuYWdlci9qcy9pbmRleC5qcz9jYjE2Il0sIm5hbWVzIjpbImFsbFZpZXdNb2RlbHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztJQUFZQSxhOzs7O0FBRVo7Ozs7QUFJQUMsT0FBT0MsT0FBUCxHQUFpQiw4QkFBYUYsYUFBYixDQUFqQiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2lkZ2V0TG9hZGVyIH0gZnJvbSAnb2NjLWNvbXBvbmVudHMvd2lkZ2V0LWNvcmUnO1xuaW1wb3J0ICogYXMgYWxsVmlld01vZGVscyBmcm9tICcuL3ZpZXctbW9kZWxzJztcblxuLyoqXG4gKiBXZSdyZSB1c2luZyBjb21tb25qcyBoZXJlIGJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBjb250cm9sXG4gKiBvZiB0aGUgd2lkZ2V0IGltcG9ydGF0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHdpZGdldExvYWRlcihhbGxWaWV3TW9kZWxzKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vUHJvamVjdHMvT2JqZWN0RWRnZS9PQ0MvUHJvamVjdHMvb2NjLXRyYWlubmluZy9zdG9yZWZyb250L3dpZGdldHMvb2JqZWN0ZWRnZS9vZVZhbG1vclJWUE1hbmFnZXIvanMvaW5kZXguanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.widgetLoader = exports.BaseWidget = exports.helpers = exports.decorators = exports.loaders = undefined;\n\nvar _widgetContext = __webpack_require__(2);\n\nObject.defineProperty(exports, 'widgetLoader', {\n  enumerable: true,\n  get: function get() {\n    return _widgetContext.init;\n  }\n});\n\nvar _loaders = __webpack_require__(3);\n\nvar loaders = _interopRequireWildcard(_loaders);\n\nvar _decorators = __webpack_require__(5);\n\nvar decorators = _interopRequireWildcard(_decorators);\n\nvar _helpers = __webpack_require__(7);\n\nvar helpers = _interopRequireWildcard(_helpers);\n\nvar _BaseWidget = __webpack_require__(17);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.loaders = loaders;\nexports.decorators = decorators;\nexports.helpers = helpers;\nexports.BaseWidget = _BaseWidget.BaseWidget;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvaW5kZXguanM/NzRlYSJdLCJuYW1lcyI6WyJpbml0IiwibG9hZGVycyIsImRlY29yYXRvcnMiLCJoZWxwZXJzIiwiQmFzZVdpZGdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OzBCQVNTQSxJOzs7O0FBVFQ7O0lBQVlDLE87O0FBQ1o7O0lBQVlDLFU7O0FBQ1o7O0lBQVlDLE87O0FBQ1o7Ozs7UUFFU0YsTyxHQUFBQSxPO1FBQ0FDLFUsR0FBQUEsVTtRQUNBQyxPLEdBQUFBLE87UUFDQUMsVSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgbG9hZGVycyBmcm9tICcuL2xvYWRlcnMnO1xuaW1wb3J0ICogYXMgZGVjb3JhdG9ycyBmcm9tICcuL2RlY29yYXRvcnMnO1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgQmFzZVdpZGdldCB9IGZyb20gJy4vQmFzZVdpZGdldCc7XG5cbmV4cG9ydCB7IGxvYWRlcnMgfTtcbmV4cG9ydCB7IGRlY29yYXRvcnMgfTtcbmV4cG9ydCB7IGhlbHBlcnMgfTtcbmV4cG9ydCB7IEJhc2VXaWRnZXQgfTtcbmV4cG9ydCB7IGluaXQgYXMgd2lkZ2V0TG9hZGVyIH0gZnJvbSAnLi93aWRnZXRDb250ZXh0JztcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vUHJvamVjdHMvT2JqZWN0RWRnZS9PQ0MvUHJvamVjdHMvb2NjLXRyYWlubmluZy9zdG9yZWZyb250Ly5vY2MtY29tcG9uZW50cy93aWRnZXRzL3dpZGdldC1jb3JlL2luZGV4LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\n\nvar _loaders = __webpack_require__(3);\n\nfunction init(allViewModels) {\n  var widgetLoader = new _loaders.Widget();\n\n  return {\n    onLoad: function onLoad($data) {\n      widgetLoader.load($data, this, allViewModels);\n    },\n    beforeAppear: function beforeAppear(pageContext) {\n      widgetLoader.beforeAppear(pageContext, this);\n    },\n    resourcesLoaded: function resourcesLoaded($data) {\n      widgetLoader.resourcesLoaded($data);\n    }\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvd2lkZ2V0Q29udGV4dC5qcz9hODk0Il0sIm5hbWVzIjpbImluaXQiLCJhbGxWaWV3TW9kZWxzIiwid2lkZ2V0TG9hZGVyIiwib25Mb2FkIiwiJGRhdGEiLCJsb2FkIiwiYmVmb3JlQXBwZWFyIiwicGFnZUNvbnRleHQiLCJyZXNvdXJjZXNMb2FkZWQiXSwibWFwcGluZ3MiOiI7Ozs7O1FBRWdCQSxJLEdBQUFBLEk7O0FBRmhCOztBQUVPLFNBQVNBLElBQVQsQ0FBY0MsYUFBZCxFQUE2QjtBQUNsQyxNQUFNQyxlQUFlLHFCQUFyQjs7QUFFQSxTQUFPO0FBQ0xDLFVBREssa0JBQ0VDLEtBREYsRUFDUztBQUNaRixtQkFBYUcsSUFBYixDQUFrQkQsS0FBbEIsRUFBeUIsSUFBekIsRUFBK0JILGFBQS9CO0FBQ0QsS0FISTtBQUtMSyxnQkFMSyx3QkFLUUMsV0FMUixFQUtxQjtBQUN4QkwsbUJBQWFJLFlBQWIsQ0FBMEJDLFdBQTFCLEVBQXVDLElBQXZDO0FBQ0QsS0FQSTtBQVNMQyxtQkFUSywyQkFTV0osS0FUWCxFQVNrQjtBQUNyQkYsbUJBQWFNLGVBQWIsQ0FBNkJKLEtBQTdCO0FBQ0Q7QUFYSSxHQUFQO0FBYUQiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdpZGdldCBhcyBXaWRnZXRMb2FkZXIgfSBmcm9tICcuL2xvYWRlcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChhbGxWaWV3TW9kZWxzKSB7XG4gIGNvbnN0IHdpZGdldExvYWRlciA9IG5ldyBXaWRnZXRMb2FkZXIoKTtcblxuICByZXR1cm4ge1xuICAgIG9uTG9hZCgkZGF0YSkge1xuICAgICAgd2lkZ2V0TG9hZGVyLmxvYWQoJGRhdGEsIHRoaXMsIGFsbFZpZXdNb2RlbHMpO1xuICAgIH0sXG5cbiAgICBiZWZvcmVBcHBlYXIocGFnZUNvbnRleHQpIHtcbiAgICAgIHdpZGdldExvYWRlci5iZWZvcmVBcHBlYXIocGFnZUNvbnRleHQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICByZXNvdXJjZXNMb2FkZWQoJGRhdGEpIHtcbiAgICAgIHdpZGdldExvYWRlci5yZXNvdXJjZXNMb2FkZWQoJGRhdGEpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL1Byb2plY3RzL09iamVjdEVkZ2UvT0NDL1Byb2plY3RzL29jYy10cmFpbm5pbmcvc3RvcmVmcm9udC8ub2NjLWNvbXBvbmVudHMvd2lkZ2V0cy93aWRnZXQtY29yZS93aWRnZXRDb250ZXh0LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _widget = __webpack_require__(4);\n\nObject.defineProperty(exports, 'Widget', {\n  enumerable: true,\n  get: function get() {\n    return _widget.Widget;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvbG9hZGVycy9pbmRleC5qcz9iOGVlIl0sIm5hbWVzIjpbIldpZGdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7bUJBU1NBLE0iLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIExvYWRlcnNcbiAqXG4gKi9cblxuLyoqXG4gKiBXaWRnZXRcbiAqL1xuZXhwb3J0IHsgV2lkZ2V0IH0gZnJvbSAnLi93aWRnZXQnO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvbG9hZGVycy9pbmRleC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Widget = exports.Widget = function () {\n  function Widget() {\n    _classCallCheck(this, Widget);\n  }\n\n  _createClass(Widget, [{\n    key: 'resourcesLoaded',\n    value: function resourcesLoaded($data) {\n      $.Topic('widget.' + $data.id() + '.resourcesLoaded').publish();\n    }\n  }, {\n    key: 'beforeAppear',\n    value: function beforeAppear(pageContext, $data) {\n      $.Topic('widget.' + $data.id() + '.beforeAppear').publish(pageContext);\n    }\n  }, {\n    key: 'load',\n    value: function load($currentWidgetData, widgetContext, viewModels) {\n      var instance = this;\n\n      /**\n       * This will fix the $data context, keeping synced the \n       * properties from the viewModel and the $data from\n       * the widget\n       */\n      var applyDataProperties = function applyDataProperties(dataProperties, viewModel, context) {\n        if (dataProperties) {\n          Object.keys(dataProperties).forEach(function (propertyKey) {\n            if (propertyKey !== '__dataApplied') {\n              context.$data[propertyKey] = context[propertyKey];\n            }\n          });\n          viewModel.prototype.$dataProperties.__widgetInstanceId = context.$data.id();\n        }\n      };\n\n      /**\n       * This will fix the context of the each method of\n       * each view model\n       */\n      var applyDataMethods = function applyDataMethods(dataMethods, context) {\n        if (dataMethods) {\n          Object.keys(dataMethods).forEach(function (methodKey) {\n            context.$data[methodKey] = function () {\n              var args = Array.prototype.slice.call(arguments);\n\n              //Original this\n              args.push(this);\n              return dataMethods[methodKey].apply(context, args);\n            };\n          });\n        }\n      };\n\n      var viewModelsInstances = {};\n\n      Object.keys(viewModels).forEach(function (viewModelName) {\n        var viewModel = viewModels[viewModelName];\n        var dataMethods = viewModel.prototype.$dataMethods;\n        var dataProperties = viewModel.prototype.$dataProperties;\n\n        /**\n         * Ensure the correct context of the view model\n         */\n        viewModel.prototype.applyContexts = function (context) {\n          context.$data = $currentWidgetData;\n          context.viewModels = viewModelsInstances;\n\n          applyDataProperties(dataProperties, viewModel, context);\n\n          /**\n           * Apply the method of the current view model\n           */\n          applyDataMethods(dataMethods, context);\n\n          /**\n           * Set the listener to the beforeAppear\n           */\n          $.Topic('widget.' + $currentWidgetData.id() + '.beforeAppear').subscribe(function (pageContext) {\n            if (typeof context.beforeAppear === 'function') {\n              context.beforeAppear(pageContext);\n            }\n          });\n\n          /**\n          * Set the listener to the resourcesLoaded\n          */\n          $.Topic('widget.' + $currentWidgetData.id() + '.resourcesLoaded').subscribe(function () {\n            if (typeof context.resourcesLoaded === 'function') {\n              context.resourcesLoaded();\n            }\n          });\n        };\n\n        /**\n         * Instantiate the current view model\n         * @type {viewModel}\n         */\n        var viewModelInstance = new viewModel();\n        viewModelsInstances[viewModelName] = viewModelInstance;\n      });\n    }\n  }]);\n\n  return Widget;\n}();\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvbG9hZGVycy93aWRnZXQuanM/NjkxOCJdLCJuYW1lcyI6WyJXaWRnZXQiLCIkZGF0YSIsIiQiLCJUb3BpYyIsImlkIiwicHVibGlzaCIsInBhZ2VDb250ZXh0IiwiJGN1cnJlbnRXaWRnZXREYXRhIiwid2lkZ2V0Q29udGV4dCIsInZpZXdNb2RlbHMiLCJpbnN0YW5jZSIsImFwcGx5RGF0YVByb3BlcnRpZXMiLCJkYXRhUHJvcGVydGllcyIsInZpZXdNb2RlbCIsImNvbnRleHQiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInByb3BlcnR5S2V5IiwicHJvdG90eXBlIiwiJGRhdGFQcm9wZXJ0aWVzIiwiX193aWRnZXRJbnN0YW5jZUlkIiwiYXBwbHlEYXRhTWV0aG9kcyIsImRhdGFNZXRob2RzIiwibWV0aG9kS2V5IiwiYXJncyIsIkFycmF5Iiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwicHVzaCIsImFwcGx5Iiwidmlld01vZGVsc0luc3RhbmNlcyIsInZpZXdNb2RlbE5hbWUiLCIkZGF0YU1ldGhvZHMiLCJhcHBseUNvbnRleHRzIiwic3Vic2NyaWJlIiwiYmVmb3JlQXBwZWFyIiwicmVzb3VyY2VzTG9hZGVkIiwidmlld01vZGVsSW5zdGFuY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBYUEsTSxXQUFBQSxNOzs7Ozs7O29DQUNLQyxLLEVBQU87QUFDckJDLFFBQUVDLEtBQUYsQ0FBUSxZQUFZRixNQUFNRyxFQUFOLEVBQVosR0FBeUIsa0JBQWpDLEVBQXFEQyxPQUFyRDtBQUNEOzs7aUNBRVlDLFcsRUFBYUwsSyxFQUFPO0FBQy9CQyxRQUFFQyxLQUFGLENBQVEsWUFBWUYsTUFBTUcsRUFBTixFQUFaLEdBQXlCLGVBQWpDLEVBQWtEQyxPQUFs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WyJleHBvcnQgY2xhc3MgV2lkZ2V0IHtcbiAgcmVzb3VyY2VzTG9hZGVkKCRkYXRhKSB7XG4gICAgJC5Ub3BpYygnd2lkZ2V0LicgKyAkZGF0YS5pZCgpICsgJy5yZXNvdXJjZXNMb2FkZWQnKS5wdWJsaXNoKCk7XG4gIH1cblxuICBiZWZvcmVBcHBlYXIocGFnZUNvbnRleHQsICRkYXRhKSB7XG4gICAgJC5Ub3BpYygnd2lkZ2V0LicgKyAkZGF0YS5pZCgpICsgJy5iZWZvcmVBcHBlYXInKS5wdWJsaXNoKHBhZ2VDb250ZXh0KTtcbiAgfVxuXG4gIGxvYWQoJGN1cnJlbnRXaWRnZXREYXRhLCB3aWRnZXRDb250ZXh0LCB2aWV3TW9kZWxzKSB7XG4gICAgbGV0IGluc3RhbmNlID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIFRoaXMgd2lsbCBmaXggdGhlICRkYXRhIGNvbnRleHQsIGtlZXBpbmcgc3luY2VkIHRoZSBcbiAgICAgKiBwcm9wZXJ0aWVzIGZyb20gdGhlIHZpZXdNb2RlbCBhbmQgdGhlICRkYXRhIGZyb21cbiAgICAgKiB0aGUgd2lkZ2V0XG4gICAgICovXG4gICAgbGV0IGFwcGx5RGF0YVByb3BlcnRpZXMgPSAoZGF0YVByb3BlcnRpZXMsIHZpZXdNb2RlbCwgY29udGV4dCkgPT4ge1xuICAgICAgaWYoZGF0YVByb3BlcnRpZXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YVByb3BlcnRpZXMpLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5S2V5KSB7XG4gICAgICAgICAgaWYocHJvcGVydHlLZXkgIT09ICdfX2RhdGFBcHBsaWVkJykge1xuICAgICAgICAgICAgY29udGV4dC4kZGF0YVtwcm9wZXJ0eUtleV0gPSBjb250ZXh0W3Byb3BlcnR5S2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2aWV3TW9kZWwucHJvdG90eXBlLiRkYXRhUHJvcGVydGllcy5fX3dpZGdldEluc3RhbmNlSWQgPSBjb250ZXh0LiRkYXRhLmlkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgd2lsbCBmaXggdGhlIGNvbnRleHQgb2YgdGhlIGVhY2ggbWV0aG9kIG9mXG4gICAgICogZWFjaCB2aWV3IG1vZGVsXG4gICAgICovXG4gICAgbGV0IGFwcGx5RGF0YU1ldGhvZHMgPSAoZGF0YU1ldGhvZHMsIGNvbnRleHQpID0+IHtcbiAgICAgIGlmKGRhdGFNZXRob2RzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGRhdGFNZXRob2RzKS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2RLZXkpIHtcbiAgICAgICAgICBjb250ZXh0LiRkYXRhW21ldGhvZEtleV0gPSBmdW5jdGlvbiAoKSB7IFxuICAgICAgICAgICAgbGV0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICAvL09yaWdpbmFsIHRoaXNcbiAgICAgICAgICAgIGFyZ3MucHVzaCh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhTWV0aG9kc1ttZXRob2RLZXldLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHZpZXdNb2RlbHNJbnN0YW5jZXMgPSB7fTtcblxuICAgIE9iamVjdC5rZXlzKHZpZXdNb2RlbHMpLmZvckVhY2godmlld01vZGVsTmFtZSA9PiB7XG4gICAgICBsZXQgdmlld01vZGVsID0gdmlld01vZGVsc1t2aWV3TW9kZWxOYW1lXTtcbiAgICAgIGxldCBkYXRhTWV0aG9kcyA9IHZpZXdNb2RlbC5wcm90b3R5cGUuJGRhdGFNZXRob2RzO1xuICAgICAgbGV0IGRhdGFQcm9wZXJ0aWVzID0gdmlld01vZGVsLnByb3RvdHlwZS4kZGF0YVByb3BlcnRpZXM7XG5cbiAgICAgIC8qKlxuICAgICAgICogRW5zdXJlIHRoZSBjb3JyZWN0IGNvbnRleHQgb2YgdGhlIHZpZXcgbW9kZWxcbiAgICAgICAqL1xuICAgICAgdmlld01vZGVsLnByb3RvdHlwZS5hcHBseUNvbnRleHRzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC4kZGF0YSA9ICRjdXJyZW50V2lkZ2V0RGF0YTtcbiAgICAgICAgY29udGV4dC52aWV3TW9kZWxzID0gdmlld01vZGVsc0luc3RhbmNlcztcblxuICAgICAgICBhcHBseURhdGFQcm9wZXJ0aWVzKGRhdGFQcm9wZXJ0aWVzLCB2aWV3TW9kZWwsIGNvbnRleHQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBseSB0aGUgbWV0aG9kIG9mIHRoZSBjdXJyZW50IHZpZXcgbW9kZWxcbiAgICAgICAgICovXG4gICAgICAgIGFwcGx5RGF0YU1ldGhvZHMoZGF0YU1ldGhvZHMsIGNvbnRleHQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGxpc3RlbmVyIHRvIHRoZSBiZWZvcmVBcHBlYXJcbiAgICAgICAgICovXG4gICAgICAgICQuVG9waWMoJ3dpZGdldC4nICsgJGN1cnJlbnRXaWRnZXREYXRhLmlkKCkgKyAnLmJlZm9yZUFwcGVhcicpLnN1YnNjcmliZShwYWdlQ29udGV4dCA9PiB7XG4gICAgICAgICAgaWYodHlwZW9mIGNvbnRleHQuYmVmb3JlQXBwZWFyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb250ZXh0LmJlZm9yZUFwcGVhcihwYWdlQ29udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgbGlzdGVuZXIgdG8gdGhlIHJlc291cmNlc0xvYWRlZFxuICAgICAgICAgKi9cbiAgICAgICAgJC5Ub3BpYygnd2lkZ2V0LicgKyAkY3VycmVudFdpZGdldERhdGEuaWQoKSArICcucmVzb3VyY2VzTG9hZGVkJykuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICBpZih0eXBlb2YgY29udGV4dC5yZXNvdXJjZXNMb2FkZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzb3VyY2VzTG9hZGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogSW5zdGFudGlhdGUgdGhlIGN1cnJlbnQgdmlldyBtb2RlbFxuICAgICAgICogQHR5cGUge3ZpZXdNb2RlbH1cbiAgICAgICAqL1xuICAgICAgY29uc3Qgdmlld01vZGVsSW5zdGFuY2UgPSBuZXcgdmlld01vZGVsKCk7XG4gICAgICB2aWV3TW9kZWxzSW5zdGFuY2VzW3ZpZXdNb2RlbE5hbWVdID0gdmlld01vZGVsSW5zdGFuY2U7XG4gICAgfSk7XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL1Byb2plY3RzL09iamVjdEVkZ2UvT0NDL1Byb2plY3RzL29jYy10cmFpbm5pbmcvc3RvcmVmcm9udC8ub2NjLWNvbXBvbmVudHMvd2lkZ2V0cy93aWRnZXQtY29yZS9sb2FkZXJzL3dpZGdldC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _widgetViewModel = __webpack_require__(6);\n\nObject.defineProperty(exports, 'exportToViewModel', {\n  enumerable: true,\n  get: function get() {\n    return _widgetViewModel.exportToViewModel;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvZGVjb3JhdG9ycy9pbmRleC5qcz8zMWQwIl0sIm5hbWVzIjpbImV4cG9ydFRvVmlld01vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs0QkFTU0EsaUIiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIERlY29yYXRvcnNcbiAqXG4gKi9cblxuLyoqXG4gKiBXaWRnZXQgVmlldyBNb2RlbFxuICovXG5leHBvcnQgeyBleHBvcnRUb1ZpZXdNb2RlbCB9IGZyb20gJy4vd2lkZ2V0Vmlld01vZGVsJztcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vUHJvamVjdHMvT2JqZWN0RWRnZS9PQ0MvUHJvamVjdHMvb2NjLXRyYWlubmluZy9zdG9yZWZyb250Ly5vY2MtY29tcG9uZW50cy93aWRnZXRzL3dpZGdldC1jb3JlL2RlY29yYXRvcnMvaW5kZXguanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.exportToViewModel = exportToViewModel;\nfunction exportToViewModel(target, key, descriptor) {\n  if (typeof target.$data === 'undefined') {\n    target.$data = {};\n  }\n\n  if (typeof target.$dataMethods === 'undefined') {\n    target.$dataMethods = {};\n  }\n\n  if (typeof target.$dataProperties === 'undefined') {\n    target.$dataProperties = {};\n  }\n\n  /**\n   * Set method context and call it\n   */\n  if (typeof target[key] === 'function') {\n    target.$dataMethods[key] = target[key];\n    return descriptor;\n  }\n\n  /**\n   * It's a property, then set its getter and setter\n   */\n  var initializer = descriptor.initializer;\n\n  delete descriptor.initializer;\n  delete descriptor.writable;\n\n  /**\n   * Object where all values of the same view model will be placed.\n   *\n   * It's an object, because if there is more than one instance of the same widget, it has\n   * to delivery the right value for the right instance\n   * \n   * @type {Object}\n   */\n  var propertyValue = {};\n\n  /**\n   * Gets the current instance id of the widget. If there is no $data yet, then, it's the first\n   * \"value\" in this view model, then, it's id will be called 'root'\n   * \n   * @return {String} widget instance id\n   */\n  var getCurrentInstanceId = function getCurrentInstanceId() {\n    var currentInstanceID = target.$data.id ? target.$data.id() : 'root';\n\n    if (currentInstanceID !== 'root' && !propertyValue[currentInstanceID]) {\n      return 'root';\n    }\n\n    return currentInstanceID;\n  };\n\n  /**\n   * Updates the propertyValue object using the current widget widget\n   * @param  {Any} value any value\n   * @return {Any} returns the current value\n   */\n  var setCurrentPropertyValue = function setCurrentPropertyValue(value) {\n    var currentInstanceID = getCurrentInstanceId();\n    propertyValue[currentInstanceID] = value;\n    return propertyValue[currentInstanceID];\n  };\n\n  /**\n   * Initializes the current property value\n   */\n  setCurrentPropertyValue(initializer.call(descriptor));\n\n  /**\n   * Setter of the property\n   * @param {Any} value any value\n   */\n  descriptor.set = function (value) {\n    setCurrentPropertyValue(value);\n  };\n\n  /**\n   * Getter of the property\n   * @return {Any} returns the current value\n   */\n  descriptor.get = function () {\n    var val = propertyValue[getCurrentInstanceId()];\n\n    //If there are more than one instance of the same widget, reset the property\n    if (this.$dataProperties.__widgetInstanceId && this.$data.id() !== this.$dataProperties.__widgetInstanceId) {\n      val = setCurrentPropertyValue(initializer.call(descriptor));\n    }\n\n    target.$data[key] = val;\n    return val;\n  };\n\n  /**\n   * Attaches the new property to the widget $data.\n   */\n  target.$dataProperties[key] = target[key];\n\n  return descriptor;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvZGVjb3JhdG9ycy93aWRnZXRWaWV3TW9kZWwuanM/OTFlYiJdLCJuYW1lcyI6WyJleHBvcnRUb1ZpZXdNb2RlbCIsInRhcmdldCIsImtleSIsImRlc2NyaXB0b3IiLCIkZGF0YSIsIiRkYXRhTWV0aG9kcyIsIiRkYXRhUHJvcGVydGllcyIsImluaXRpYWxpemVyIiwid3JpdGFibGUiLCJwcm9wZXJ0eVZhbHVlIiwiZ2V0Q3VycmVudEluc3RhbmNlSWQiLCJjdXJyZW50SW5zdGFuY2VJRCIsImlkIiwic2V0Q3VycmVudFByb3BlcnR5VmFsdWUiLCJ2YWx1ZSIsImNhbGwiLCJzZXQiLCJnZXQiLCJ2YWwiLCJfX3dpZGdldEluc3RhbmNlSWQiXSwibWFwcGluZ3MiOiI7Ozs7O1FBQWdCQSxpQixHQUFBQSxpQjtBQUFULFNBQVNBLGlCQUFULENBQTJCQyxNQUEzQixFQUFtQ0MsR0FBbkMsRUFBd0NDLFVBQXhDLEVBQW9EO0FBQ3pELE1BQUcsT0FBT0YsT0FBT0csS0FBZCxLQUF3QixXQUEzQixFQUF3QztBQUN0Q0gsV0FBT0csS0FBUCxHQUFlLEVBQWY7QUFDRDs7QUFFRCxNQUFHLE9BQU9ILE9BQU9JLFlBQWQsS0FBK0IsV0FBbEMsRUFBK0M7QUFDN0NKLFdBQU9JLFlBQVAsR0FBc0IsRUFBdEI7QUFDRDs7QUFFRCxNQUFHLE9BQU9KLE9BQU9LLGVBQWQsS0FBa0MsV0FBckMsRUFBa0Q7QUFDaERMLFdBQU9LLGVBQVAsR0FBeUIsRUFBekI7QUFDRDs7QUFFRDs7O0FBR0EsTUFBRyxPQUFPTCxPQUFPQyxHQUFQLENBQVAsS0FBdUIsVUFBMUIsRUFBc0M7QUFDcENELFdBQU9JLFlBQVAsQ0FBb0JILEdBQXBCLElBQTJCRCxPQUFPQyxHQUFQLENBQTNCO0FBQ0EsV0FBT0MsVUFBUDtBQUNEOztBQUVEOzs7QUFyQnlELE1Bd0JwREksV0F4Qm9ELEdBd0JyQ0osVUF4QnFDLENBd0JwREksV0F4Qm9EOztBQXlCekQsU0FBT0osV0FBV0ksV0FBbEI7QUFDQSxTQUFPSixXQUFXSyxRQUFsQjs7QUFFQTs7Ozs7Ozs7QUFRQSxNQUFNQyxnQkFBZ0IsRUFBdEI7O0FBRUE7Ozs7OztBQU1BLE1BQU1DLHVCQUF1QixTQUF2QkEsb0JBQXVCLEdBQU07QUFDakMsUUFBSUMsb0JBQW9CVixPQUFPRyxLQUFQLENBQWFRLEVBQWIsR0FBa0JYLE9BQU9HLEtBQVAsQ0FBYVEsRUFBYixFQUFsQixHQUFzQyxNQUE5RDs7QUFFQSxRQUFHRCxzQkFBc0IsTUFBdEIsSUFBZ0MsQ0FBQ0YsY0FBY0UsaUJBQWQsQ0FBcEMsRUFBc0U7QUFDcEUsYUFBTyxNQUFQO0FBQ0Q7O0FBRUQsV0FBT0EsaUJBQVA7QUFDRCxHQVJEOztBQVVBOzs7OztBQUtBLE1BQU1FLDBCQUEwQixTQUExQkEsdUJBQTBCLENBQUNDLEtBQUQsRUFBVztBQUN6QyxRQUFJSCxvQkFBb0JELHNCQUF4QjtBQUNBRCxrQkFBY0UsaUJBQWQsSUFBbUNHLEtBQW5DO0FBQ0EsV0FBT0wsY0FBY0UsaUJBQWQsQ0FBUDtBQUNELEdBSkQ7O0FBTUE7OztBQUdBRSwwQkFBd0JOLFlBQVlRLElBQVosQ0FBaUJaLFVBQWpCLENBQXhCOztBQUVBOzs7O0FBSUFBLGFBQVdhLEdBQVgsR0FBaUIsVUFBU0YsS0FBVCxFQUFnQjtBQUMvQkQsNEJBQXdCQyxLQUF4QjtBQUNELEdBRkQ7O0FBSUE7Ozs7QUFJQVgsYUFBV2MsR0FBWCxHQUFpQixZQUFXO0FBQzFCLFFBQUlDLE1BQU1ULGNBQWNDLHNCQUFkLENBQVY7O0FBRUE7QUFDQSxRQUFHLEtBQUtKLGVBQUwsQ0FBcUJhLGtCQUFyQixJQUEyQyxLQUFLZixLQUFMLENBQVdRLEVBQVgsT0FBb0IsS0FBS04sZUFBTCxDQUFxQmEsa0JBQXZGLEVBQTJHO0FBQ3pHRCxZQUFNTCx3QkFBd0JOLFlBQVlRLElBQVosQ0FBaUJaLFVBQWpCLENBQXhCLENBQU47QUFDRDs7QUFFREYsV0FBT0csS0FBUCxDQUFhRixHQUFiLElBQW9CZ0IsR0FBcEI7QUFDQSxXQUFPQSxHQUFQO0FBQ0QsR0FWRDs7QUFZQTs7O0FBR0FqQixTQUFPSyxlQUFQLENBQXVCSixHQUF2QixJQUE4QkQsT0FBT0MsR0FBUCxDQUE5Qjs7QUFFQSxTQUFPQyxVQUFQO0FBQ0QiLCJmaWxlIjoiNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBleHBvcnRUb1ZpZXdNb2RlbCh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcikge1xuICBpZih0eXBlb2YgdGFyZ2V0LiRkYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgIHRhcmdldC4kZGF0YSA9IHt9O1xuICB9XG5cbiAgaWYodHlwZW9mIHRhcmdldC4kZGF0YU1ldGhvZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGFyZ2V0LiRkYXRhTWV0aG9kcyA9IHt9O1xuICB9XG5cbiAgaWYodHlwZW9mIHRhcmdldC4kZGF0YVByb3BlcnRpZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGFyZ2V0LiRkYXRhUHJvcGVydGllcyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBtZXRob2QgY29udGV4dCBhbmQgY2FsbCBpdFxuICAgKi9cbiAgaWYodHlwZW9mIHRhcmdldFtrZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGFyZ2V0LiRkYXRhTWV0aG9kc1trZXldID0gdGFyZ2V0W2tleV07XG4gICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gIH1cblxuICAvKipcbiAgICogSXQncyBhIHByb3BlcnR5LCB0aGVuIHNldCBpdHMgZ2V0dGVyIGFuZCBzZXR0ZXJcbiAgICovXG4gIGxldCB7aW5pdGlhbGl6ZXJ9ID0gZGVzY3JpcHRvcjtcbiAgZGVsZXRlIGRlc2NyaXB0b3IuaW5pdGlhbGl6ZXI7XG4gIGRlbGV0ZSBkZXNjcmlwdG9yLndyaXRhYmxlO1xuXG4gIC8qKlxuICAgKiBPYmplY3Qgd2hlcmUgYWxsIHZhbHVlcyBvZiB0aGUgc2FtZSB2aWV3IG1vZGVsIHdpbGwgYmUgcGxhY2VkLlxuICAgKlxuICAgKiBJdCdzIGFuIG9iamVjdCwgYmVjYXVzZSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIGluc3RhbmNlIG9mIHRoZSBzYW1lIHdpZGdldCwgaXQgaGFzXG4gICAqIHRvIGRlbGl2ZXJ5IHRoZSByaWdodCB2YWx1ZSBmb3IgdGhlIHJpZ2h0IGluc3RhbmNlXG4gICAqIFxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGluc3RhbmNlIGlkIG9mIHRoZSB3aWRnZXQuIElmIHRoZXJlIGlzIG5vICRkYXRhIHlldCwgdGhlbiwgaXQncyB0aGUgZmlyc3RcbiAgICogXCJ2YWx1ZVwiIGluIHRoaXMgdmlldyBtb2RlbCwgdGhlbiwgaXQncyBpZCB3aWxsIGJlIGNhbGxlZCAncm9vdCdcbiAgICogXG4gICAqIEByZXR1cm4ge1N0cmluZ30gd2lkZ2V0IGluc3RhbmNlIGlkXG4gICAqL1xuICBjb25zdCBnZXRDdXJyZW50SW5zdGFuY2VJZCA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudEluc3RhbmNlSUQgPSB0YXJnZXQuJGRhdGEuaWQgPyB0YXJnZXQuJGRhdGEuaWQoKSA6ICdyb290JztcblxuICAgIGlmKGN1cnJlbnRJbnN0YW5jZUlEICE9PSAncm9vdCcgJiYgIXByb3BlcnR5VmFsdWVbY3VycmVudEluc3RhbmNlSURdKSB7XG4gICAgICByZXR1cm4gJ3Jvb3QnO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50SW5zdGFuY2VJRDtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcHJvcGVydHlWYWx1ZSBvYmplY3QgdXNpbmcgdGhlIGN1cnJlbnQgd2lkZ2V0IHdpZGdldFxuICAgKiBAcGFyYW0gIHtBbnl9IHZhbHVlIGFueSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtBbnl9IHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICovXG4gIGNvbnN0IHNldEN1cnJlbnRQcm9wZXJ0eVZhbHVlID0gKHZhbHVlKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRJbnN0YW5jZUlEID0gZ2V0Q3VycmVudEluc3RhbmNlSWQoKTtcbiAgICBwcm9wZXJ0eVZhbHVlW2N1cnJlbnRJbnN0YW5jZUlEXSA9IHZhbHVlO1xuICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlW2N1cnJlbnRJbnN0YW5jZUlEXTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGN1cnJlbnQgcHJvcGVydHkgdmFsdWVcbiAgICovXG4gIHNldEN1cnJlbnRQcm9wZXJ0eVZhbHVlKGluaXRpYWxpemVyLmNhbGwoZGVzY3JpcHRvcikpO1xuXG4gIC8qKlxuICAgKiBTZXR0ZXIgb2YgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBhbnkgdmFsdWVcbiAgICovXG4gIGRlc2NyaXB0b3Iuc2V0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBzZXRDdXJyZW50UHJvcGVydHlWYWx1ZSh2YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHRlciBvZiB0aGUgcHJvcGVydHlcbiAgICogQHJldHVybiB7QW55fSByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlXG4gICAqL1xuICBkZXNjcmlwdG9yLmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCB2YWwgPSBwcm9wZXJ0eVZhbHVlW2dldEN1cnJlbnRJbnN0YW5jZUlkKCldO1xuICAgIFxuICAgIC8vSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgaW5zdGFuY2Ugb2YgdGhlIHNhbWUgd2lkZ2V0LCByZXNldCB0aGUgcHJvcGVydHlcbiAgICBpZih0aGlzLiRkYXRhUHJvcGVydGllcy5fX3dpZGdldEluc3RhbmNlSWQgJiYgdGhpcy4kZGF0YS5pZCgpICE9PSB0aGlzLiRkYXRhUHJvcGVydGllcy5fX3dpZGdldEluc3RhbmNlSWQpIHtcbiAgICAgIHZhbCA9IHNldEN1cnJlbnRQcm9wZXJ0eVZhbHVlKGluaXRpYWxpemVyLmNhbGwoZGVzY3JpcHRvcikpO1xuICAgIH1cblxuICAgIHRhcmdldC4kZGF0YVtrZXldID0gdmFsO1xuICAgIHJldHVybiB2YWw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHRoZSBuZXcgcHJvcGVydHkgdG8gdGhlIHdpZGdldCAkZGF0YS5cbiAgICovXG4gIHRhcmdldC4kZGF0YVByb3BlcnRpZXNba2V5XSA9IHRhcmdldFtrZXldO1xuICBcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvZGVjb3JhdG9ycy93aWRnZXRWaWV3TW9kZWwuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _OERestClient = __webpack_require__(8);\n\nObject.defineProperty(exports, 'OERestClient', {\n  enumerable: true,\n  get: function get() {\n    return _OERestClient.OERestClient;\n  }\n});\n\nvar _CartHelper = __webpack_require__(12);\n\nObject.defineProperty(exports, 'CartHelper', {\n  enumerable: true,\n  get: function get() {\n    return _CartHelper.CartHelper;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvaGVscGVycy9pbmRleC5qcz80NzExIl0sIm5hbWVzIjpbIk9FUmVzdENsaWVudCIsIkNhcnRIZWxwZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O3lCQUFTQSxZOzs7Ozs7Ozs7dUJBQ0FDLFUiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IE9FUmVzdENsaWVudCB9IGZyb20gJy4vT0VSZXN0Q2xpZW50JztcbmV4cG9ydCB7IENhcnRIZWxwZXIgfSBmcm9tICcuL0NhcnRIZWxwZXInO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvaGVscGVycy9pbmRleC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=");
},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OERestClient = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _knockout = __webpack_require__(9);\n\nvar _knockout2 = _interopRequireDefault(_knockout);\n\nvar _promise = __webpack_require__(10);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _ccRestClient = __webpack_require__(11);\n\nvar _ccRestClient2 = _interopRequireDefault(_ccRestClient);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar OERestClient = exports.OERestClient = function () {\n  function OERestClient() {\n    var endpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var query = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, OERestClient);\n\n    this.endpoint = null;\n    this.path = null;\n    this.query = null;\n\n    this.endpoint = endpoint;\n    this.path = path;\n    this.query = query;\n  }\n\n  /**\n   * Set the request endpoint\n   *\n   * @param  {String} endpoint The endpoint\n   * @return {Void}\n   */\n\n\n  _createClass(OERestClient, [{\n    key: 'setEndpoint',\n    value: function setEndpoint(endpoint) {\n      this.endpoint = endpoint;\n    }\n\n    /**\n     * Set the path parameters\n     *\n     * @param  {String} path The path parameters\n     * @return {Void}\n     */\n\n  }, {\n    key: 'setPath',\n    value: function setPath(path) {\n      this.path = path;\n    }\n\n    /**\n     * Set the request query parameters\n     *\n     * @param  {Object} query The query parameters\n     * @return {Void}\n     */\n\n  }, {\n    key: 'setQuery',\n    value: function setQuery(query) {\n      this.query = query;\n    }\n\n    /**\n     * Send the request to OCC\n     *\n     * @return {promise}\n     */\n\n  }, {\n    key: 'send',\n    value: function send() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        // Check required properties validity\n        if (!_this.validate()) {\n          reject({ error: 'Required fields not provided' });\n        }\n        // Request using OCC Rest Client\n        _ccRestClient2.default.request(_this.endpoint, _this.query, function (response) {\n          resolve(response);\n        }, function (error) {\n          reject(error);\n        }, _this.path);\n      });\n    }\n\n    /**\n     * Validate the provided parameters\n     *\n     * @return {Boolean} Whether the provided parameters are valid or not\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate() {\n      return this.endpoint ? true : false;\n    }\n  }]);\n\n  return OERestClient;\n}();\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvaGVscGVycy9PRVJlc3RDbGllbnQuanM/M2ZiNCJdLCJuYW1lcyI6WyJPRVJlc3RDbGllbnQiLCJlbmRwb2ludCIsInBhdGgiLCJxdWVyeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidmFsaWRhdGUiLCJlcnJvciIsInJlcXVlc3QiLCJyZXNwb25zZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUVhQSxZLFdBQUFBLFk7QUFLWCwwQkFBbUQ7QUFBQSxRQUF0Q0MsUUFBc0MsdUVBQTNCLEVBQTJCO0FBQUEsUUFBdkJDLElBQXVCLHVFQUFoQixFQUFnQjtBQUFBLFFBQVpDLEtBQVksdUVBQUosRUFBSTs7QUFBQTs7QUFBQSxTQUpuREYsUUFJbUQsR0FKeEMsSUFJd0M7QUFBQSxTQUhuREMsSUFHbUQsR0FINUMsSUFHNEM7QUFBQSxTQUZuREMsS0FFbUQsR0FGM0MsSUFFMkM7O0FBQ2pELFNBQUtGLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0EsU0FBS0MsSUFBTCxHQUFnQkEsSUFBaEI7QUFDQSxTQUFLQyxLQUFMLEdBQWdCQSxLQUFoQjtBQUNEOztBQUVEOzs7Ozs7Ozs7O2dDQU1hRixRLEVBQVU7QUFDckIsV0FBS0EsUUFBTCxHQUFnQkEsUUFBaEI7QUFDRDs7QUFFRDs7Ozs7Ozs7OzRCQU1TQyxJLEVBQU07QUFDYixXQUFLQSxJQUFMLEdBQVlBLElBQVo7QUFDRDs7QUFFRDs7Ozs7Ozs7OzZCQU1VQyxLLEVBQU87QUFDZixXQUFLQSxLQUFMLEdBQWFBLEtBQWI7QUFDRDs7QUFFRDs7Ozs7Ozs7MkJBS1E7QUFBQTs7QUFDTixhQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdEM7QUFDQSxZQUFJLENBQUMsTUFBS0MsUUFBTCxFQUFMLEVBQXNCO0FBQ3BCRCxpQkFBTyxFQUFDRSxPQUFPLDhCQUFSLEVBQVA7QUFDRDtBQUNEO0FBQ0EsK0JBQVdDLE9BQVgsQ0FDRSxNQUFLUixRQURQLEVBRUUsTUFBS0UsS0FGUCxFQUdFLFVBQUNPLFFBQUQsRUFBYztBQUNaTCxrQkFBUUssUUFBUjtBQUNELFNBTEgsRUFNRSxVQUFDRixLQUFELEVBQVc7QUFDVEYsaUJBQU9FLEtBQVA7QUFDRCxTQVJILEVBU0UsTUFBS04sSUFUUDtBQVVELE9BaEJNLENBQVA7QUFpQkQ7O0FBRUQ7Ozs7Ozs7OytCQUtZO0FBQ1YsYUFBUSxLQUFLRCxRQUFOLEdBQWtCLElBQWxCLEdBQXlCLEtBQWhDO0FBQ0Q7Ozs7OztBQUNGIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQga28gZnJvbSAna25vY2tvdXQnO1xuaW1wb3J0IHByb21pc2UgZnJvbSAncHJvbWlzZSc7XG5pbXBvcnQgcmVzdENsaWVudCBmcm9tICdjY1Jlc3RDbGllbnQnO1xuXG5leHBvcnQgY2xhc3MgT0VSZXN0Q2xpZW50IHtcbiAgZW5kcG9pbnQgPSBudWxsO1xuICBwYXRoID0gbnVsbDtcbiAgcXVlcnkgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yIChlbmRwb2ludCA9ICcnLCBwYXRoID0gJycsIHF1ZXJ5ID0ge30pIHtcbiAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQ7XG4gICAgdGhpcy5wYXRoICAgICA9IHBhdGg7XG4gICAgdGhpcy5xdWVyeSAgICA9IHF1ZXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcmVxdWVzdCBlbmRwb2ludFxuICAgKlxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGVuZHBvaW50IFRoZSBlbmRwb2ludFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgc2V0RW5kcG9pbnQgKGVuZHBvaW50KSB7XG4gICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGF0aCBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEBwYXJhbSAge1N0cmluZ30gcGF0aCBUaGUgcGF0aCBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBzZXRQYXRoIChwYXRoKSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJlcXVlc3QgcXVlcnkgcGFyYW1ldGVyc1xuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHF1ZXJ5IFRoZSBxdWVyeSBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBzZXRRdWVyeSAocXVlcnkpIHtcbiAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCB0aGUgcmVxdWVzdCB0byBPQ0NcbiAgICpcbiAgICogQHJldHVybiB7cHJvbWlzZX1cbiAgICovXG4gIHNlbmQgKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBDaGVjayByZXF1aXJlZCBwcm9wZXJ0aWVzIHZhbGlkaXR5XG4gICAgICBpZiAoIXRoaXMudmFsaWRhdGUoKSkge1xuICAgICAgICByZWplY3Qoe2Vycm9yOiAnUmVxdWlyZWQgZmllbGRzIG5vdCBwcm92aWRlZCd9KTtcbiAgICAgIH1cbiAgICAgIC8vIFJlcXVlc3QgdXNpbmcgT0NDIFJlc3QgQ2xpZW50XG4gICAgICByZXN0Q2xpZW50LnJlcXVlc3QoXG4gICAgICAgIHRoaXMuZW5kcG9pbnQsXG4gICAgICAgIHRoaXMucXVlcnksXG4gICAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9LFxuICAgICAgICB0aGlzLnBhdGgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnMgYXJlIHZhbGlkIG9yIG5vdFxuICAgKi9cbiAgdmFsaWRhdGUgKCkge1xuICAgIHJldHVybiAodGhpcy5lbmRwb2ludCkgPyB0cnVlIDogZmFsc2U7XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL1Byb2plY3RzL09iamVjdEVkZ2UvT0NDL1Byb2plY3RzL29jYy10cmFpbm5pbmcvc3RvcmVmcm9udC8ub2NjLWNvbXBvbmVudHMvd2lkZ2V0cy93aWRnZXQtY29yZS9oZWxwZXJzL09FUmVzdENsaWVudC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJrbm9ja291dFwiP2NhZjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImtub2Nrb3V0XCJcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgN1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwcm9taXNlXCI/YjM4YSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJwcm9taXNlXCJcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDdcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjY1Jlc3RDbGllbnRcIj9iMzJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzExX187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImNjUmVzdENsaWVudFwiXG4gKiogbW9kdWxlIGlkID0gMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CartHelper = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Dependencies\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _jquery = __webpack_require__(13);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _knockout = __webpack_require__(9);\n\nvar _knockout2 = _interopRequireDefault(_knockout);\n\nvar _cart = __webpack_require__(14);\n\nvar _cart2 = _interopRequireDefault(_cart);\n\nvar _pubsub = __webpack_require__(15);\n\nvar _pubsub2 = _interopRequireDefault(_pubsub);\n\nvar _ccConstants = __webpack_require__(16);\n\nvar _ccConstants2 = _interopRequireDefault(_ccConstants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Constants\n */\nvar TOPIC_ON_ALL_ITEMS_ADDED = 'oe.on.all.items.added';\n\n/**\n * Helper for cart common actions\n *\n * @class\n *\n * @property {Object} widget The widget context\n * @property {Object} cart   OCC Cart instance\n */\n\nvar CartHelper = exports.CartHelper = function () {\n  function CartHelper(widget) {\n    _classCallCheck(this, CartHelper);\n\n    this.widget = widget;\n    this.cart = _cart2.default.getInstance();\n  }\n\n  /**\n   * Adds an item to cart\n   *\n   * @param {Object} item The item to add to cart\n   */\n\n\n  _createClass(CartHelper, [{\n    key: 'addItemToCart',\n    value: function addItemToCart(item) {\n      _jquery2.default.Topic(_pubsub2.default.topicNames.CART_ADD).publishWith(item);\n    }\n\n    /**\n     * Add multiple items to cart\n     *\n     * @param {Array} items A list of items\n     *\n     * @return {Promise} A promise to wait for adding\n     */\n\n  }, {\n    key: 'addMultipleItemsToCart',\n    value: function addMultipleItemsToCart(items) {\n      var _this = this;\n\n      // If items is not an array, reject the promise\n      if (!_jquery2.default.isArray(items)) {\n        return Promise.reject({ error: 'An array of items must be provided!' });\n      } else {\n        // Create a temporary items array in the helper\n        this.addingQueue = items;\n\n        // Store the current pricing success callback\n        var currentSuccessCb = this.getCartCallbackByAction(_ccConstants2.default.PRICING_SUCCESS_CB);\n\n        // Replace the pricing success callback to handle the multiple add to cart\n        this.setPricingSuccessCallback(this.onPricingSuccess.bind(this));\n\n        return new Promise(function (resolve) {\n          // Handle action end\n          var onItemsAdded = function onItemsAdded() {\n            // In case of empty list:\n            // - remove the topic subscribe\n            _jquery2.default.Topic(TOPIC_ON_ALL_ITEMS_ADDED).unsubscribe(onItemsAdded);\n            // - return the previous pricing success callback\n            _this.setPricingSuccessCallback(currentSuccessCb);\n            // - resolve the promise\n            resolve({ success: true });\n          };\n\n          // Unsubscribe and subscribe again to avoid stacking\n          _jquery2.default.Topic(TOPIC_ON_ALL_ITEMS_ADDED).unsubscribe(onItemsAdded);\n          _jquery2.default.Topic(TOPIC_ON_ALL_ITEMS_ADDED).subscribe(onItemsAdded);\n\n          // If we have a list of items in queue,\n          // send the first to cart to start the loop\n          if (_this.addingQueue.length) {\n            _this.addItemToCart(_this.addingQueue[0]);\n          } else {\n            // Call the action end handler manually\n            onItemsAdded();\n          }\n        });\n      }\n    }\n\n    /**\n     * Empty the cart\n     */\n\n  }, {\n    key: 'clearCart',\n    value: function clearCart() {\n      this.cart.emptyCart();\n      this.cart.markDirty();\n    }\n\n    /**\n     * Get a cart callback given an action\n     *\n     * @param {String} action The action performed by the callback\n     *\n     * @return {Function|Undefined} The callback\n     */\n\n  }, {\n    key: 'getCartCallbackByAction',\n    value: function getCartCallbackByAction(action) {\n      var allCallbacks = this.cart.callbacks;\n      var callback = void 0;\n\n      if (allCallbacks.hasOwnProperty(action)) {\n        callback = allCallbacks[action];\n      }\n\n      return callback;\n    }\n\n    /**\n     * Get a dynamic property given an ID\n     *\n     * @param {String} id The dynamic property ID to look for\n     *\n     * @return {Object|Undefined} The dynamic property or nothing\n     */\n\n  }, {\n    key: 'getDynamicPropertyById',\n    value: function getDynamicPropertyById() {\n      var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      var property = void 0;\n\n      if (this.cart && _knockout2.default.isObservable(this.cart.dynamicProperties)) {\n        var properties = this.cart.dynamicProperties();\n\n        // Using 'some' due to IE11 compatibility issues\n        properties.some(function (prop) {\n          if (prop.id() === id) {\n            property = prop;\n            return true;\n          }\n        });\n      }\n\n      return property;\n    }\n\n    /**\n     * Handle pricing success for multiple add to cart\n     */\n\n  }, {\n    key: 'onPricingSuccess',\n    value: function onPricingSuccess() {\n      // Apply this defensive check to avoid page break\n      if (_jquery2.default.isArray(this.addingQueue)) {\n        // Remove the recently added product\n        this.addingQueue.shift();\n\n        // If there is remaining items in list, add the first to cart\n        if (this.addingQueue.length) {\n          this.addItemToCart(this.addingQueue[0]);\n        } else {\n          // Otherwise, notify the action end\n          _jquery2.default.Topic(TOPIC_ON_ALL_ITEMS_ADDED).publish();\n        }\n      }\n    }\n\n    /**\n     * Save current cart state to cookies\n     */\n\n  }, {\n    key: 'saveCart',\n    value: function saveCart() {\n      this.cart.saveCartCookie();\n    }\n\n    /**\n     * Save current cart state to cookies and price the cart\n     */\n\n  }, {\n    key: 'saveCartAndPersist',\n    value: function saveCartAndPersist() {\n      this.saveCart();\n      this.cart.priceCartIfNeccessary(true);\n    }\n\n    /**\n     * Set a callback to cart given the action\n     *\n     * @param {String}   action   The callback action\n     * @param {Function} callback The callback\n     */\n\n  }, {\n    key: 'setCartCallback',\n    value: function setCartCallback(action, callback) {\n      if (action && typeof callback === 'function') {\n        var allCallbacks = this.cart.callbacks;\n\n        allCallbacks[action] = callback;\n\n        this.cart.setCallbackFunctions(allCallbacks);\n      }\n    }\n\n    /**\n     * Set a dynamic property value\n     *\n     * @param {Object} property The dynamic property\n     * @param {Any}    value    The new value\n     */\n\n  }, {\n    key: 'setDynamicProperty',\n    value: function setDynamicProperty(property, value) {\n      if (property && _knockout2.default.isObservable(property.value)) {\n        property.value(value);\n      }\n    }\n\n    /**\n     * Set a dynamic property value given an id\n     *\n     * @param {String} id    The dynamic property id\n     * @param {Any}    value The new value\n     */\n\n  }, {\n    key: 'setDynamicPropertyById',\n    value: function setDynamicPropertyById(id, value) {\n      var property = this.getDynamicPropertyById(id);\n\n      if (property) {\n        this.setDynamicProperty(property, value);\n      }\n    }\n\n    /**\n     * Set prepricing callback to cart\n     *\n     * @param {Function} callback The callback to handle prepricing action\n     */\n\n  }, {\n    key: 'setPrepricingCallback',\n    value: function setPrepricingCallback(callback) {\n      this.setCartCallback(_ccConstants2.default.PREPRICING, callback);\n    }\n\n    /**\n     * Set failure pricing callback to cart\n     *\n     * @param {Function} callback The callback to handle failure pricing action\n     */\n\n  }, {\n    key: 'setPricingFailureCallback',\n    value: function setPricingFailureCallback(callback) {\n      this.setCartCallback(_ccConstants2.default.PRICING_FAILURE_CB, callback);\n    }\n\n    /**\n     * Set success pricing callback to cart\n     *\n     * @param {Function} callback The callback to handle success pricing action\n     */\n\n  }, {\n    key: 'setPricingSuccessCallback',\n    value: function setPricingSuccessCallback(callback) {\n      this.setCartCallback(_ccConstants2.default.PRICING_SUCCESS_CB, callback);\n    }\n  }]);\n\n  return CartHelper;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvaGVscGVycy9DYXJ0SGVscGVyLmpzPzg1NGEiXSwibmFtZXMiOlsiVE9QSUNfT05fQUxMX0lURU1TX0FEREVEIiwiQ2FydEhlbHBlciIsIndpZGdldCIsImNhcnQiLCJnZXRJbnN0YW5jZSIsIml0ZW0iLCJUb3BpYyIsInRvcGljTmFtZXMiLCJDQVJUX0FERCIsInB1Ymxpc2hXaXRoIiwiaXRlbXMiLCJpc0FycmF5IiwiUHJvbWlzZSIsInJlamVjdCIsImVycm9yIiwiYWRkaW5nUXVldWUiLCJjdXJyZW50U3VjY2Vzc0NiIiwiZ2V0Q2FydENhbGxiYWNrQnlBY3Rpb24iLCJQUklDSU5HX1NVQ0NFU1NfQ0IiLCJzZXRQcmljaW5nU3VjY2Vzc0NhbGxiYWNrIiwib25QcmljaW5nU3VjY2VzcyIsImJpbmQiLCJyZXNvbHZlIiwib25JdGVtc0FkZGVkIiwidW5zdWJzY3JpYmUiLCJzdWNjZXNzIiwic3Vic2NyaWJlIiwibGVuZ3RoIiwiYWRkSXRlbVRvQ2FydCIsImVtcHR5Q2FydCIsIm1hcmtEaXJ0eSIsImFjdGlvbiIsImFsbENhbGxiYWNrcyIsImNhbGxiYWNrcyIsImNhbGxiYWNrIiwiaGFzT3duUHJvcGVydHkiLCJpZCIsInByb3BlcnR5IiwiaXNPYnNlcnZhYmxlIiwiZHluYW1pY1Byb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwic29tZSIsInByb3AiLCJzaGlmdCIsInB1Ymxpc2giLCJzYXZlQ2FydENvb2tpZSIsInNhdmVDYXJ0IiwicHJpY2VDYXJ0SWZOZWNjZXNzYXJ5Iiwic2V0Q2FsbGJhY2tGdW5jdGlvbnMiLCJ2YWx1ZSIsImdldER5bmFtaWNQcm9wZXJ0eUJ5SWQiLCJzZXREeW5hbWljUHJvcGVydHkiLCJzZXRDYXJ0Q2FsbGJhY2siLCJQUkVQUklDSU5H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VUFBSUMsUUFBSixFQUFjO0FBQ1osYUFBS2Msa0JBQUwsQ0FBd0JkLFFBQXhCLEVBQWtDWSxLQUFsQztBQUNEO0FBQ0Y7O0FBRUQ7Ozs7Ozs7OzBDQUt1QmYsUSxFQUFVO0FBQy9CLFdBQUtrQixlQUFMLENBQXFCLHNCQUFZQyxVQUFqQyxFQUE2Q25CLFFBQTdDO0FBQ0Q7O0FBRUQ7Ozs7Ozs7OzhDQUsyQkEsUSxFQUFVO0FBQ25DLFdBQUtrQixlQUFMLENBQXFCLHNCQUFZRSxrQkFBakMsRUFBcURwQixRQUFyRDtBQUNEOztBQUVEOzs7Ozs7Ozs4Q0FLMkJBLFEsRUFBVTtBQUNuQyxXQUFLa0IsZUFBTCxDQUFxQixzQkFBWWxDLGtCQUFqQyxFQUFxRGdCLFFBQXJEO0FBQ0QiLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGtvIGZyb20gJ2tub2Nrb3V0JztcbmltcG9ydCBDYXJ0IGZyb20gJ3BhZ2VMYXlvdXQvY2FydCc7XG5pbXBvcnQgcHVic3ViIGZyb20gJ3B1YnN1Yic7XG5pbXBvcnQgY2NDb25zdGFudHMgZnJvbSAnY2NDb25zdGFudHMnO1xuXG4vKipcbiAqIENvbnN0YW50c1xuICovXG5jb25zdCBUT1BJQ19PTl9BTExfSVRFTVNfQURERUQgPSAnb2Uub24uYWxsLml0ZW1zLmFkZGVkJztcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNhcnQgY29tbW9uIGFjdGlvbnNcbiAqXG4gKiBAY2xhc3NcbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gd2lkZ2V0IFRoZSB3aWRnZXQgY29udGV4dFxuICogQHByb3BlcnR5IHtPYmplY3R9IGNhcnQgICBPQ0MgQ2FydCBpbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgQ2FydEhlbHBlciB7XG4gIGNvbnN0cnVjdG9yICh3aWRnZXQpIHtcbiAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcbiAgICB0aGlzLmNhcnQgPSBDYXJ0LmdldEluc3RhbmNlKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhbiBpdGVtIHRvIGNhcnRcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gVGhlIGl0ZW0gdG8gYWRkIHRvIGNhcnRcbiAgICovXG4gIGFkZEl0ZW1Ub0NhcnQgKGl0ZW0pIHtcbiAgICAkLlRvcGljKHB1YnN1Yi50b3BpY05hbWVzLkNBUlRfQUREKS5wdWJsaXNoV2l0aChpdGVtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbXVsdGlwbGUgaXRlbXMgdG8gY2FydFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBpdGVtcyBBIGxpc3Qgb2YgaXRlbXNcbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZX0gQSBwcm9taXNlIHRvIHdhaXQgZm9yIGFkZGluZ1xuICAgKi9cbiAgYWRkTXVsdGlwbGVJdGVtc1RvQ2FydCAoaXRlbXMpIHtcbiAgICAvLyBJZiBpdGVtcyBpcyBub3QgYW4gYXJyYXksIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgIGlmICghJC5pc0FycmF5KGl0ZW1zKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHtlcnJvcjogJ0FuIGFycmF5IG9mIGl0ZW1zIG11c3QgYmUgcHJvdmlkZWQhJ30pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgaXRlbXMgYXJyYXkgaW4gdGhlIGhlbHBlclxuICAgICAgdGhpcy5hZGRpbmdRdWV1ZSA9IGl0ZW1zO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgY3VycmVudCBwcmljaW5nIHN1Y2Nlc3MgY2FsbGJhY2tcbiAgICAgIGNvbnN0IGN1cnJlbnRTdWNjZXNzQ2IgPSB0aGlzLmdldENhcnRDYWxsYmFja0J5QWN0aW9uKGNjQ29uc3RhbnRzLlBSSUNJTkdfU1VDQ0VTU19DQik7XG5cbiAgICAgIC8vIFJlcGxhY2UgdGhlIHByaWNpbmcgc3VjY2VzcyBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG11bHRpcGxlIGFkZCB0byBjYXJ0XG4gICAgICB0aGlzLnNldFByaWNpbmdTdWNjZXNzQ2FsbGJhY2sodGhpcy5vblByaWNpbmdTdWNjZXNzLmJpbmQodGhpcykpO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGFjdGlvbiBlbmRcbiAgICAgICAgY29uc3Qgb25JdGVtc0FkZGVkID0gKCkgPT4ge1xuICAgICAgICAgIC8vIEluIGNhc2Ugb2YgZW1wdHkgbGlzdDpcbiAgICAgICAgICAvLyAtIHJlbW92ZSB0aGUgdG9waWMgc3Vic2NyaWJlXG4gICAgICAgICAgJC5Ub3BpYyhUT1BJQ19PTl9BTExfSVRFTVNfQURERUQpLnVuc3Vic2NyaWJlKG9uSXRlbXNBZGRlZCk7XG4gICAgICAgICAgLy8gLSByZXR1cm4gdGhlIHByZXZpb3VzIHByaWNpbmcgc3VjY2VzcyBjYWxsYmFja1xuICAgICAgICAgIHRoaXMuc2V0UHJpY2luZ1N1Y2Nlc3NDYWxsYmFjayhjdXJyZW50U3VjY2Vzc0NiKTtcbiAgICAgICAgICAvLyAtIHJlc29sdmUgdGhlIHByb21pc2VcbiAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVW5zdWJzY3JpYmUgYW5kIHN1YnNjcmliZSBhZ2FpbiB0byBhdm9pZCBzdGFja2luZ1xuICAgICAgICAkLlRvcGljKFRPUElDX09OX0FMTF9JVEVNU19BRERFRCkudW5zdWJzY3JpYmUob25JdGVtc0FkZGVkKTtcbiAgICAgICAgJC5Ub3BpYyhUT1BJQ19PTl9BTExfSVRFTVNfQURERUQpLnN1YnNjcmliZShvbkl0ZW1zQWRkZWQpO1xuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBsaXN0IG9mIGl0ZW1zIGluIHF1ZXVlLFxuICAgICAgICAvLyBzZW5kIHRoZSBmaXJzdCB0byBjYXJ0IHRvIHN0YXJ0IHRoZSBsb29wXG4gICAgICAgIGlmICh0aGlzLmFkZGluZ1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvQ2FydCh0aGlzLmFkZGluZ1F1ZXVlWzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDYWxsIHRoZSBhY3Rpb24gZW5kIGhhbmRsZXIgbWFudWFsbHlcbiAgICAgICAgICBvbkl0ZW1zQWRkZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVtcHR5IHRoZSBjYXJ0XG4gICAqL1xuICBjbGVhckNhcnQgKCkge1xuICAgIHRoaXMuY2FydC5lbXB0eUNhcnQoKTtcbiAgICB0aGlzLmNhcnQubWFya0RpcnR5KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2FydCBjYWxsYmFjayBnaXZlbiBhbiBhY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbiBUaGUgYWN0aW9uIHBlcmZvcm1lZCBieSB0aGUgY2FsbGJhY2tcbiAgICpcbiAgICogQHJldHVybiB7RnVuY3Rpb258VW5kZWZpbmVkfSBUaGUgY2FsbGJhY2tcbiAgICovXG4gIGdldENhcnRDYWxsYmFja0J5QWN0aW9uIChhY3Rpb24pIHtcbiAgICBjb25zdCBhbGxDYWxsYmFja3MgPSB0aGlzLmNhcnQuY2FsbGJhY2tzO1xuICAgIGxldCBjYWxsYmFjaztcblxuICAgIGlmIChhbGxDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoYWN0aW9uKSkge1xuICAgICAgY2FsbGJhY2sgPSBhbGxDYWxsYmFja3NbYWN0aW9uXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgZHluYW1pYyBwcm9wZXJ0eSBnaXZlbiBhbiBJRFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGR5bmFtaWMgcHJvcGVydHkgSUQgdG8gbG9vayBmb3JcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fFVuZGVmaW5lZH0gVGhlIGR5bmFtaWMgcHJvcGVydHkgb3Igbm90aGluZ1xuICAgKi9cbiAgZ2V0RHluYW1pY1Byb3BlcnR5QnlJZCAoaWQgPSAnJykge1xuICAgIGxldCBwcm9wZXJ0eTtcblxuICAgIGlmICh0aGlzLmNhcnQgJiYga28uaXNPYnNlcnZhYmxlKHRoaXMuY2FydC5keW5hbWljUHJvcGVydGllcykpIHtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB0aGlzLmNhcnQuZHluYW1pY1Byb3BlcnRpZXMoKTtcblxuICAgICAgLy8gVXNpbmcgJ3NvbWUnIGR1ZSB0byBJRTExIGNvbXBhdGliaWxpdHkgaXNzdWVzXG4gICAgICBwcm9wZXJ0aWVzLnNvbWUocHJvcCA9PiB7XG4gICAgICAgIGlmIChwcm9wLmlkKCkgPT09IGlkKSB7XG4gICAgICAgICAgcHJvcGVydHkgPSBwcm9wO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvcGVydHk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHByaWNpbmcgc3VjY2VzcyBmb3IgbXVsdGlwbGUgYWRkIHRvIGNhcnRcbiAgICovXG4gIG9uUHJpY2luZ1N1Y2Nlc3MgKCkge1xuICAgIC8vIEFwcGx5IHRoaXMgZGVmZW5zaXZlIGNoZWNrIHRvIGF2b2lkIHBhZ2UgYnJlYWtcbiAgICBpZiAoJC5pc0FycmF5KHRoaXMuYWRkaW5nUXVldWUpKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIHJlY2VudGx5IGFkZGVkIHByb2R1Y3RcbiAgICAgIHRoaXMuYWRkaW5nUXVldWUuc2hpZnQoKTtcblxuICAgICAgLy8gSWYgdGhlcmUgaXMgcmVtYWluaW5nIGl0ZW1zIGluIGxpc3QsIGFkZCB0aGUgZmlyc3QgdG8gY2FydFxuICAgICAgaWYgKHRoaXMuYWRkaW5nUXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvQ2FydCh0aGlzLmFkZGluZ1F1ZXVlWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgbm90aWZ5IHRoZSBhY3Rpb24gZW5kXG4gICAgICAgICQuVG9waWMoVE9QSUNfT05fQUxMX0lURU1TX0FEREVEKS5wdWJsaXNoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgY3VycmVudCBjYXJ0IHN0YXRlIHRvIGNvb2tpZXNcbiAgICovXG4gIHNhdmVDYXJ0ICgpIHtcbiAgICB0aGlzLmNhcnQuc2F2ZUNhcnRDb29raWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIGN1cnJlbnQgY2FydCBzdGF0ZSB0byBjb29raWVzIGFuZCBwcmljZSB0aGUgY2FydFxuICAgKi9cbiAgc2F2ZUNhcnRBbmRQZXJzaXN0ICgpIHtcbiAgICB0aGlzLnNhdmVDYXJ0KCk7XG4gICAgdGhpcy5jYXJ0LnByaWNlQ2FydElmTmVjY2Vzc2FyeSh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBjYWxsYmFjayB0byBjYXJ0IGdpdmVuIHRoZSBhY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9ICAgYWN0aW9uICAgVGhlIGNhbGxiYWNrIGFjdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2tcbiAgICovXG4gIHNldENhcnRDYWxsYmFjayAoYWN0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChhY3Rpb24gJiYgdHlwZW9mIChjYWxsYmFjaykgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnN0IGFsbENhbGxiYWNrcyA9IHRoaXMuY2FydC5jYWxsYmFja3M7XG5cbiAgICAgIGFsbENhbGxiYWNrc1thY3Rpb25dID0gY2FsbGJhY2s7XG5cbiAgICAgIHRoaXMuY2FydC5zZXRDYWxsYmFja0Z1bmN0aW9ucyhhbGxDYWxsYmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBkeW5hbWljIHByb3BlcnR5IHZhbHVlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0eSBUaGUgZHluYW1pYyBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge0FueX0gICAgdmFsdWUgICAgVGhlIG5ldyB2YWx1ZVxuICAgKi9cbiAgc2V0RHluYW1pY1Byb3BlcnR5IChwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBpZiAocHJvcGVydHkgJiYga28uaXNPYnNlcnZhYmxlKHByb3BlcnR5LnZhbHVlKSkge1xuICAgICAgcHJvcGVydHkudmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBkeW5hbWljIHByb3BlcnR5IHZhbHVlIGdpdmVuIGFuIGlkXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAgICBUaGUgZHluYW1pYyBwcm9wZXJ0eSBpZFxuICAgKiBAcGFyYW0ge0FueX0gICAgdmFsdWUgVGhlIG5ldyB2YWx1ZVxuICAgKi9cbiAgc2V0RHluYW1pY1Byb3BlcnR5QnlJZCAoaWQsIHZhbHVlKSB7XG4gICAgY29uc3QgcHJvcGVydHkgPSB0aGlzLmdldER5bmFtaWNQcm9wZXJ0eUJ5SWQoaWQpO1xuXG4gICAgaWYgKHByb3BlcnR5KSB7XG4gICAgICB0aGlzLnNldER5bmFtaWNQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcHJlcHJpY2luZyBjYWxsYmFjayB0byBjYXJ0XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBoYW5kbGUgcHJlcHJpY2luZyBhY3Rpb25cbiAgICovXG4gIHNldFByZXByaWNpbmdDYWxsYmFjayAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhcnRDYWxsYmFjayhjY0NvbnN0YW50cy5QUkVQUklDSU5HLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGZhaWx1cmUgcHJpY2luZyBjYWxsYmFjayB0byBjYXJ0XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBoYW5kbGUgZmFpbHVyZSBwcmljaW5nIGFjdGlvblxuICAgKi9cbiAgc2V0UHJpY2luZ0ZhaWx1cmVDYWxsYmFjayAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhcnRDYWxsYmFjayhjY0NvbnN0YW50cy5QUklDSU5HX0ZBSUxVUkVfQ0IsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgc3VjY2VzcyBwcmljaW5nIGNhbGxiYWNrIHRvIGNhcnRcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGhhbmRsZSBzdWNjZXNzIHByaWNpbmcgYWN0aW9uXG4gICAqL1xuICBzZXRQcmljaW5nU3VjY2Vzc0NhbGxiYWNrIChjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FydENhbGxiYWNrKGNjQ29uc3RhbnRzLlBSSUNJTkdfU1VDQ0VTU19DQiwgY2FsbGJhY2spO1xuICB9XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL1Byb2plY3RzL09iamVjdEVkZ2UvT0NDL1Byb2plY3RzL29jYy10cmFpbm5pbmcvc3RvcmVmcm9udC8ub2NjLWNvbXBvbmVudHMvd2lkZ2V0cy93aWRnZXQtY29yZS9oZWxwZXJzL0NhcnRIZWxwZXIuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");
},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqcXVlcnlcIj8wYjc2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEzX187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImpxdWVyeVwiXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_14__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYWdlTGF5b3V0L2NhcnRcIj9hMTQxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE0X187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcInBhZ2VMYXlvdXQvY2FydFwiXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwdWJzdWJcIj8xNjc5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzE1X187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcInB1YnN1YlwiXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjY0NvbnN0YW50c1wiPzkzMzgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTZfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwiY2NDb25zdGFudHNcIlxuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgN1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseWidget = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _knockout = __webpack_require__(9);\n\nvar _knockout2 = _interopRequireDefault(_knockout);\n\nvar _ccLogger = __webpack_require__(18);\n\nvar _ccLogger2 = _interopRequireDefault(_ccLogger);\n\nvar _viewportHelper = __webpack_require__(19);\n\nvar _viewportHelper2 = _interopRequireDefault(_viewportHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseWidget = exports.BaseWidget = function () {\n  function BaseWidget() {\n    _classCallCheck(this, BaseWidget);\n\n    this.applyContexts(this);\n    this._setExtensionSettings();\n    this._setViewportHelper();\n  }\n\n  _createClass(BaseWidget, [{\n    key: '_setExtensionSettings',\n    value: function _setExtensionSettings() {\n      this.$data.siteSettings = _knockout2.default.observable();\n\n      var extensionSiteSettings = this.$data.site().extensionSiteSettings;\n      this.$data.siteSettings(Object.keys(extensionSiteSettings).length ? extensionSiteSettings : null);\n    }\n  }, {\n    key: '_setViewportHelper',\n    value: function _setViewportHelper() {\n      var _this = this;\n\n      this.$data.viewportHelper = _viewportHelper2.default;\n      this.$data.viewportClass = _knockout2.default.pureComputed(function () {\n        return 'viewport-' + _viewportHelper2.default.viewportDesignation();\n      });\n\n      this.$data.isPhone = _knockout2.default.observable(false);\n      this.$data.isTablet = _knockout2.default.observable(false);\n      this.$data.isLaptop = _knockout2.default.observable(false);\n      this.$data.isDesktop = _knockout2.default.observable(false);\n\n      this._setCurrentViewport(_viewportHelper2.default.viewportDesignation());\n\n      _viewportHelper2.default.viewportDesignation.subscribe(function (viewport) {\n        return _this._setCurrentViewport(viewport);\n      });\n    }\n  }, {\n    key: '_setCurrentViewport',\n    value: function _setCurrentViewport(currentViewport) {\n      var viewportMapping = {};\n\n      viewportMapping.xs = this.$data.isPhone;\n      viewportMapping.sm = this.$data.isTablet;\n      viewportMapping.md = this.$data.isLaptop;\n      viewportMapping.lg = this.$data.isDesktop;\n\n      Object.keys(viewportMapping).forEach(function (viewportKey) {\n        return viewportMapping[viewportKey](viewportKey === currentViewport);\n      });\n    }\n  }, {\n    key: 'getSiteSetting',\n    value: function getSiteSetting(key) {\n      if (!this.hasSiteSettings()) {\n        this.log('There is no Site Settings configured', 'warn');\n        return false;\n      }\n\n      var siteSettings = this.$data.siteSettings();\n\n      if (typeof siteSettings[key] === 'undefined') {\n        this.log('The setting ' + key + ' doesn\\'t exist', 'warn');\n        return false;\n      }\n\n      return siteSettings[key];\n    }\n  }, {\n    key: 'hasSiteSettings',\n    value: function hasSiteSettings() {\n      return this.$data.siteSettings() !== null;\n    }\n  }, {\n    key: 'log',\n    value: function log(message) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';\n      var context = arguments[2];\n\n      context = context || this.$data.displayName();\n      _ccLogger2.default[type]('[OE][' + context + '] - ' + message);\n    }\n  }]);\n\n  return BaseWidget;\n}();\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvLm9jYy1jb21wb25lbnRzL3dpZGdldHMvd2lkZ2V0LWNvcmUvQmFzZVdpZGdldC5qcz83ZTc4Il0sIm5hbWVzIjpbIkJhc2VXaWRnZXQiLCJhcHBseUNvbnRleHRzIiwiX3NldEV4dGVuc2lvblNldHRpbmdzIiwiX3NldFZpZXdwb3J0SGVscGVyIiwiJGRhdGEiLCJzaXRlU2V0dGluZ3MiLCJvYnNlcnZhYmxlIiwiZXh0ZW5zaW9uU2l0ZVNldHRpbmdzIiwic2l0ZSIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJ2aWV3cG9ydEhlbHBlciIsInZpZXdwb3J0Q2xhc3MiLCJwdXJlQ29tcHV0ZWQiLCJ2aWV3cG9ydERlc2lnbmF0aW9uIiwiaXNQaG9uZSIsImlzVGFibGV0IiwiaXNMYXB0b3AiLCJpc0Rlc2t0b3AiLCJfc2V0Q3VycmVudFZpZXdwb3J0Iiwic3Vic2NyaWJlIiwidmlld3BvcnQiLCJjdXJyZW50Vmlld3BvcnQiLCJ2aWV3cG9ydE1hcHBpbmciLCJ4cyIsInNtIiwibWQiLCJsZyIsImZvckVhY2giLCJ2aWV3cG9ydEtleSIsImtleSIsImhhc1NpdGVTZXR0aW5ncyIsImxvZyIsIm1lc3NhZ2UiLCJ0eXBlIiwiY29udGV4dCIsImRpc3BsYXlOYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7O0lBRWFBLFUsV0FBQUEsVTtBQUNYLHdCQUFjO0FBQUE7O0FBQ1osU0FBS0MsYUFBTCxDQUFtQixJQUFuQjtBQUNBLFNBQUtDLHFCQUFMO0FBQ0EsU0FBS0Msa0JBQUw7QUFDRDs7Ozs0Q0FFdUI7QUFDdEIsV0FBS0MsS0FBTCxDQUFXQyxZQUFYLEdBQTBCLG1CQUFHQyxVQUFILEVBQTFCOztBQUVBLFVBQUlDLHdCQUF3QixLQUFLSCxLQUFMLENBQVdJLElBQVgsR0FBa0JELHFCQUE5QztBQUNBLFdBQUtILEtBQUwsQ0FBV0MsWUFBWCxDQUF3QkksT0FBT0MsSUFBUCxDQUFZSCxxQkFBWixFQUFtQ0ksTUFBbkMsR0FBNENKLHFCQUE1QyxHQUFvRSxJQUE1RjtBQUNEOzs7eUNBRW9CO0FBQUE7O0FBQ25CLFdBQUtILEtBQUwsQ0FBV1EsY0FBWDtBQUNBLFdBQUtSLEtBQUwsQ0FBV1MsYUFBWCxHQUEyQixtQkFBR0MsWUFBSCxDQUFnQixZQUFZO0FBQ3JELGVBQU8sY0FBYyx5QkFBZUMsbUJBQWYsRUFBckI7QUFDRCxPQUYwQixDQUEzQjs7QUFJQSxXQUFLWCxLQUFMLENBQVdZLE9BQVgsR0FBcUIsbUJBQUdWLFVBQUgsQ0FBYyxLQUFkLENBQXJCO0FBQ0EsV0FBS0YsS0FBTCxDQUFXYSxRQUFYLEdBQXNCLG1CQUFHWCxVQUFILENBQWMsS0FBZCxDQUF0QjtBQUNBLFdBQUtGLEtBQUwsQ0FBV2MsUUFBWCxHQUFzQixtQkFBR1osVUFBSCxDQUFjLEtBQWQsQ0FBdEI7QUFDQSxXQUFLRixLQUFMLENBQVdlLFNBQVgsR0FBdUIsbUJBQUdiLFVBQUgsQ0FBYyxLQUFkLENBQXZCOztBQUVBLFdBQUtjLG1CQUFMLENBQXlCLHlCQUFlTCxtQkFBZixFQUF6Qjs7QUFFQSwrQkFBZUEsbUJBQWYsQ0FBbUNNLFNBQW5DLENBQTZDO0FBQUEsZUFBWSxNQUFLRCxtQkFBTCxDQUF5QkUsUUFBekIsQ0FBWjtBQUFBLE9BQTdDO0FBQ0Q7Ozt3Q0FFbUJDLGUsRUFBaUI7QUFDbkMsVUFBSUMsa0JBQWtCLEVBQXRCOztBQUVBQSxzQkFBZ0JDLEVBQWhCLEdBQXFCLEtBQUtyQixLQUFMLENBQVdZLE9BQWhDO0FBQ0FRLHNCQUFnQkUsRUFBaEIsR0FBcUIsS0FBS3RCLEtBQUwsQ0FBV2EsUUFBaEM7QUFDQU8sc0JBQWdCRyxFQUFoQixHQUFxQixLQUFLdkIsS0FBTCxDQUFXYyxRQUFoQztBQUNBTSxzQkFBZ0JJLEVBQWhCLEdBQXFCLEtBQUt4QixLQUFMLENBQVdlLFNBQWhDOztBQUVBVixhQUFPQyxJQUFQLENBQVljLGVBQVosRUFBNkJLLE9BQTdCLENBQXFDLFVBQUNDLFdBQUQ7QUFBQSxlQUFpQk4sZ0JBQWdCTSxXQUFoQixFQUE2QkEsZ0JBQWdCUCxlQUE3QyxDQUFqQjtBQUFBLE9BQXJDO0FBQ0Q7OzttQ0FFY1EsRyxFQUFLO0FBQ2xCLFVBQUcsQ0FBQyxLQUFLQyxlQUFMLEVBQUosRUFBNEI7QUFDMUIsYUFBS0MsR0FBTCxDQUFTLHNDQUFULEVBQWlELE1BQWpEO0FBQ0EsZUFBTyxLQUFQO0FBQ0Q7O0FBRUQsVUFBSTVCLGVBQWUsS0FBS0QsS0FBTCxDQUFXQyxZQUFYLEVBQW5COztBQUVBLFVBQUcsT0FBT0EsYUFBYTBCLEdBQWIsQ0FBUCxLQUE2QixXQUFoQyxFQUE2QztBQUMzQyxhQUFLRSxHQUFMLGtCQUF3QkYsR0FBeEIsc0JBQTZDLE1BQTdDO0FBQ0EsZUFBTyxLQUFQO0FBQ0Q7O0FBRUQsYUFBTzFCLGFBQWEwQixHQUFiLENBQVA7QUFDRDs7O3NDQUVpQjtBQUNoQixhQUFPLEtBQUszQixLQUFMLENBQVdDLFlBQVgsT0FBOEIsSUFBckM7QUFDRDs7O3dCQUVHNkIsTyxFQUFpQztBQUFBLFVBQXhCQyxJQUF3Qix1RUFBakIsTUFBaUI7QUFBQSxVQUFUQyxPQUFTOztBQUNuQ0EsZ0JBQVVBLFdBQVcsS0FBS2hDLEtBQUwsQ0FBV2lDLFdBQVgsRUFBckI7QUFDQSx5QkFBU0YsSUFBVCxZQUF1QkMsT0FBdkIsWUFBcUNGLE9BQXJDO0FBQ0Q7Ozs7OztBQUNGIiwiZmlsZSI6IjE3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGtvIGZyb20gJ2tub2Nrb3V0JztcbmltcG9ydCBjY0xvZ2dlciBmcm9tICdjY0xvZ2dlcic7XG5pbXBvcnQgdmlld3BvcnRIZWxwZXIgZnJvbSAndmlld3BvcnRIZWxwZXInO1xuXG5leHBvcnQgY2xhc3MgQmFzZVdpZGdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXBwbHlDb250ZXh0cyh0aGlzKTtcbiAgICB0aGlzLl9zZXRFeHRlbnNpb25TZXR0aW5ncygpO1xuICAgIHRoaXMuX3NldFZpZXdwb3J0SGVscGVyKCk7XG4gIH1cblxuICBfc2V0RXh0ZW5zaW9uU2V0dGluZ3MoKSB7XG4gICAgdGhpcy4kZGF0YS5zaXRlU2V0dGluZ3MgPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgXG4gICAgbGV0IGV4dGVuc2lvblNpdGVTZXR0aW5ncyA9IHRoaXMuJGRhdGEuc2l0ZSgpLmV4dGVuc2lvblNpdGVTZXR0aW5ncztcbiAgICB0aGlzLiRkYXRhLnNpdGVTZXR0aW5ncyhPYmplY3Qua2V5cyhleHRlbnNpb25TaXRlU2V0dGluZ3MpLmxlbmd0aCA/IGV4dGVuc2lvblNpdGVTZXR0aW5ncyA6IG51bGwpO1xuICB9XG5cbiAgX3NldFZpZXdwb3J0SGVscGVyKCkge1xuICAgIHRoaXMuJGRhdGEudmlld3BvcnRIZWxwZXIgPSB2aWV3cG9ydEhlbHBlcjtcbiAgICB0aGlzLiRkYXRhLnZpZXdwb3J0Q2xhc3MgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICd2aWV3cG9ydC0nICsgdmlld3BvcnRIZWxwZXIudmlld3BvcnREZXNpZ25hdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy4kZGF0YS5pc1Bob25lID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XG4gICAgdGhpcy4kZGF0YS5pc1RhYmxldCA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuICAgIHRoaXMuJGRhdGEuaXNMYXB0b3AgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcbiAgICB0aGlzLiRkYXRhLmlzRGVza3RvcCA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuXG4gICAgdGhpcy5fc2V0Q3VycmVudFZpZXdwb3J0KHZpZXdwb3J0SGVscGVyLnZpZXdwb3J0RGVzaWduYXRpb24oKSk7XG5cbiAgICB2aWV3cG9ydEhlbHBlci52aWV3cG9ydERlc2lnbmF0aW9uLnN1YnNjcmliZSh2aWV3cG9ydCA9PiB0aGlzLl9zZXRDdXJyZW50Vmlld3BvcnQodmlld3BvcnQpKTtcbiAgfVxuXG4gIF9zZXRDdXJyZW50Vmlld3BvcnQoY3VycmVudFZpZXdwb3J0KSB7XG4gICAgbGV0IHZpZXdwb3J0TWFwcGluZyA9IHt9O1xuXG4gICAgdmlld3BvcnRNYXBwaW5nLnhzID0gdGhpcy4kZGF0YS5pc1Bob25lO1xuICAgIHZpZXdwb3J0TWFwcGluZy5zbSA9IHRoaXMuJGRhdGEuaXNUYWJsZXQ7XG4gICAgdmlld3BvcnRNYXBwaW5nLm1kID0gdGhpcy4kZGF0YS5pc0xhcHRvcDtcbiAgICB2aWV3cG9ydE1hcHBpbmcubGcgPSB0aGlzLiRkYXRhLmlzRGVza3RvcDtcblxuICAgIE9iamVjdC5rZXlzKHZpZXdwb3J0TWFwcGluZykuZm9yRWFjaCgodmlld3BvcnRLZXkpID0+IHZpZXdwb3J0TWFwcGluZ1t2aWV3cG9ydEtleV0odmlld3BvcnRLZXkgPT09IGN1cnJlbnRWaWV3cG9ydCkpO1xuICB9XG5cbiAgZ2V0U2l0ZVNldHRpbmcoa2V5KSB7XG4gICAgaWYoIXRoaXMuaGFzU2l0ZVNldHRpbmdzKCkpIHtcbiAgICAgIHRoaXMubG9nKCdUaGVyZSBpcyBubyBTaXRlIFNldHRpbmdzIGNvbmZpZ3VyZWQnLCAnd2FybicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBzaXRlU2V0dGluZ3MgPSB0aGlzLiRkYXRhLnNpdGVTZXR0aW5ncygpO1xuXG4gICAgaWYodHlwZW9mIHNpdGVTZXR0aW5nc1trZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5sb2coYFRoZSBzZXR0aW5nICR7a2V5fSBkb2Vzbid0IGV4aXN0YCwgJ3dhcm4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2l0ZVNldHRpbmdzW2tleV07XG4gIH1cblxuICBoYXNTaXRlU2V0dGluZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGRhdGEuc2l0ZVNldHRpbmdzKCkgIT09IG51bGw7XG4gIH1cblxuICBsb2cobWVzc2FnZSwgdHlwZSA9ICdpbmZvJywgY29udGV4dCkge1xuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IHRoaXMuJGRhdGEuZGlzcGxheU5hbWUoKTsgICAgXG4gICAgY2NMb2dnZXJbdHlwZV0oYFtPRV1bJHtjb250ZXh0fV0gLSAke21lc3NhZ2V9YCk7XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL1Byb2plY3RzL09iamVjdEVkZ2UvT0NDL1Byb2plY3RzL29jYy10cmFpbm5pbmcvc3RvcmVmcm9udC8ub2NjLWNvbXBvbmVudHMvd2lkZ2V0cy93aWRnZXQtY29yZS9CYXNlV2lkZ2V0LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjY0xvZ2dlclwiPzg0MmEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMThfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwiY2NMb2dnZXJcIlxuICoqIG1vZHVsZSBpZCA9IDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgN1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ2aWV3cG9ydEhlbHBlclwiPzBiMjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTlfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwidmlld3BvcnRIZWxwZXJcIlxuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgN1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},,,,,,,,,,function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_29__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJzdG9yYWdlQXBpXCI/ZjczMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yOV9fO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJzdG9yYWdlQXBpXCJcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},,function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _oeValmorRVPManager = __webpack_require__(32);\n\nObject.defineProperty(exports, 'oeValmorRVPManager', {\n  enumerable: true,\n  get: function get() {\n    return _oeValmorRVPManager.oeValmorRVPManager;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvd2lkZ2V0cy9vYmplY3RlZGdlL29lVmFsbW9yUlZQTWFuYWdlci9qcy92aWV3LW1vZGVscy9pbmRleC5qcz8zM2M3Il0sIm5hbWVzIjpbIm9lVmFsbW9yUlZQTWFuYWdlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7K0JBQVNBLGtCIiwiZmlsZSI6IjMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgb2VWYWxtb3JSVlBNYW5hZ2VyIH0gZnJvbSAnLi9vZVZhbG1vclJWUE1hbmFnZXInO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvd2lkZ2V0cy9vYmplY3RlZGdlL29lVmFsbW9yUlZQTWFuYWdlci9qcy92aWV3LW1vZGVscy9pbmRleC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.oeValmorRVPManager = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _decorators = __webpack_require__(5);\n\nvar _widgetCore = __webpack_require__(1);\n\nvar _knockout = __webpack_require__(9);\n\nvar _knockout2 = _interopRequireDefault(_knockout);\n\nvar _storageApi = __webpack_require__(29);\n\nvar _storageApi2 = _interopRequireDefault(_storageApi);\n\nvar _jquery = __webpack_require__(13);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Core\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Libraries, Helpers\n */\n\n\nvar STORAGE_KEY = 'oe-valmor-recently-viewed-products';\n\nvar oeValmorRVPManager = exports.oeValmorRVPManager = function (_BaseWidget) {\n  _inherits(oeValmorRVPManager, _BaseWidget);\n\n  /**\n   * On load view model\n   */\n  function oeValmorRVPManager() {\n    _classCallCheck(this, oeValmorRVPManager);\n\n    var _this = _possibleConstructorReturn(this, (oeValmorRVPManager.__proto__ || Object.getPrototypeOf(oeValmorRVPManager)).call(this));\n    // Constructing the BaseWidget\n\n\n    _this.storage = _storageApi2.default.getInstance();\n    _this.setTopicListener();\n    return _this;\n  }\n\n  _createClass(oeValmorRVPManager, [{\n    key: 'beforeAppear',\n    value: function beforeAppear() {\n      // Store the current product id, if the actual page is a PDP\n      this.storeCurrentIfProduct();\n    }\n\n    /**\n     * Retrieves the current stored products list\n     */\n\n  }, {\n    key: 'getStoredProducts',\n    value: function getStoredProducts() {\n      var productList = this.storage.getItem(STORAGE_KEY);\n      return productList && productList !== '' ? productList.split(';') : [];\n    }\n\n    /**\n     * Set the topic listener\n     */\n\n  }, {\n    key: 'setTopicListener',\n    value: function setTopicListener() {\n      var _this2 = this;\n\n      _jquery2.default.Topic('OE_VALMOR_RVP_NEW_PRODUCT').subscribe(function (productId) {\n        return _this2.storeProductById(productId);\n      });\n    }\n\n    /**\n     * Stores the product Id\n     */\n\n  }, {\n    key: 'storeProductById',\n    value: function storeProductById(productId) {\n      if (productId) {\n        var maxProducts = this.$data.maxItems && typeof this.$data.maxItems === 'function' && !isNaN(this.$data.maxItems()) ? parseInt(this.$data.maxItems(), 10) : 8;\n        var storedProducts = [].concat(productId, this.getStoredProducts().filter(function (pId) {\n          return pId !== productId;\n        })).slice(0, maxProducts);\n        return this.storage.setItem(STORAGE_KEY, storedProducts.join(';'));\n      }\n      return false;\n    }\n\n    /**\n     * If data is defined, $data.product is a function and it's return is not undefined, stores the product id\n     */\n\n  }, {\n    key: 'storeCurrentIfProduct',\n    value: function storeCurrentIfProduct() {\n      if (this.$data && typeof this.$data.product === 'function' && this.$data.product()) {\n        var productId = this.$data.product().id();\n        return this.storeProductById(productId);\n      }\n      return false;\n    }\n  }]);\n\n  return oeValmorRVPManager;\n}(_widgetCore.BaseWidget);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvd2lkZ2V0cy9vYmplY3RlZGdlL29lVmFsbW9yUlZQTWFuYWdlci9qcy92aWV3LW1vZGVscy9vZVZhbG1vclJWUE1hbmFnZXIuanM/ZjkyNyJdLCJuYW1lcyI6WyJTVE9SQUdFX0tFWSIsIm9lVmFsbW9yUlZQTWFuYWdlciIsInN0b3JhZ2UiLCJnZXRJbnN0YW5jZSIsInNldFRvcGljTGlzdGVuZXIiLCJzdG9yZUN1cnJlbnRJZlByb2R1Y3QiLCJwcm9kdWN0TGlzdCIsImdldEl0ZW0iLCJzcGxpdCIsIlRvcGljIiwic3Vic2NyaWJlIiwicHJvZHVjdElkIiwic3RvcmVQcm9kdWN0QnlJZCIsIm1heFByb2R1Y3RzIiwiJGRhdGEiLCJtYXhJdGVtcyIsImlzTmFOIiwicGFyc2VJbnQiLCJzdG9yZWRQcm9kdWN0cyIsImNvbmNhdCIsImdldFN0b3JlZFByb2R1Y3RzIiwiZmlsdGVyIiwicElkIiwic2xpY2UiLCJzZXRJdGVtIiwiam9pbiIsInByb2R1Y3QiLCJpZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBS0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7OytlQVhBOzs7OztBQU1BOzs7OztBQU9BLElBQU1BLGNBQWMsb0NBQXBCOztJQUVhQyxrQixXQUFBQSxrQjs7O0FBRVg7OztBQUdBLGdDQUFjO0FBQUE7O0FBQUE7QUFDWjs7O0FBR0EsVUFBS0MsT0FBTCxHQUFlLHFCQUFXQyxXQUFYLEVBQWY7QUFDQSxVQUFLQyxnQkFBTDtBQUxZO0FBTWI7Ozs7bUNBRWM7QUFDYjtBQUNBLFdBQUtDLHFCQUFMO0FBQ0Q7O0FBRUQ7Ozs7Ozt3Q0FHb0I7QUFDbEIsVUFBTUMsY0FBYyxLQUFLSixPQUFMLENBQWFLLE9BQWIsQ0FBcUJQLFdBQXJCLENBQXBCO0FBQ0EsYUFBT00sZUFBZUEsZ0JBQWdCLEVBQS9CLEdBQW9DQSxZQUFZRSxLQUFaLENBQWtCLEdBQWxCLENBQXBDLEdBQTZELEVBQXBFO0FBQ0Q7O0FBRUQ7Ozs7Ozt1Q0FHbUI7QUFBQTs7QUFDakIsdUJBQUVDLEtBQUYsQ0FBUSwyQkFBUixFQUFxQ0MsU0FBckMsQ0FBK0MsVUFBQ0MsU0FBRCxFQUFlO0FBQzVELGVBQU8sT0FBS0MsZ0JBQUwsQ0FBc0JELFNBQXRCLENBQVA7QUFDRCxPQUZEO0FBR0Q7O0FBRUQ7Ozs7OztxQ0FHaUJBLFMsRUFBVztBQUMxQixVQUFJQSxTQUFKLEVBQWU7QUFDYixZQUFNRSxjQUFjLEtBQUtDLEtBQUwsQ0FBV0MsUUFBWCxJQUF1QixPQUFPLEtBQUtELEtBQUwsQ0FBV0MsUUFBbEIsS0FBK0IsVUFBdEQsSUFBb0UsQ0FBQ0MsTUFBTSxLQUFLRixLQUFMLENBQVdDLFFBQVgsRUFBTixDQUFyRSxHQUFvR0UsU0FBUyxLQUFLSCxLQUFMLENBQVdDLFFBQVgsRUFBVCxFQUErQixFQUEvQixDQUFwRyxHQUF5SSxDQUE3SjtBQUNBLFlBQU1HLGlCQUFpQixHQUFHQyxNQUFILENBQVVSLFNBQVYsRUFBcUIsS0FBS1MsaUJBQUwsR0FBeUJDLE1BQXpCLENBQWdDLFVBQUNDLEdBQUQ7QUFBQSxpQkFBU0EsUUFBUVgsU0FBakI7QUFBQSxTQUFoQyxDQUFyQixFQUFrRlksS0FBbEYsQ0FBd0YsQ0FBeEYsRUFBMEZWLFdBQTFGLENBQXZCO0FBQ0EsZUFBTyxLQUFLWCxPQUFMLENBQWFzQixPQUFiLENBQXFCeEIsV0FBckIsRUFBa0NrQixlQUFlTyxJQUFmLENBQW9CLEdBQXBCLENBQWxDLENBQVA7QUFDRDtBQUNELGFBQU8sS0FBUDtBQUNEOztBQUVEOzs7Ozs7NENBR3dCO0FBQ3RCLFVBQUksS0FBS1gsS0FBTCxJQUFjLE9BQU8sS0FBS0EsS0FBTCxDQUFXWSxPQUFsQixLQUE4QixVQUE1QyxJQUEwRCxLQUFLWixLQUFMLENBQVdZLE9BQVgsRUFBOUQsRUFBb0Y7QUFDbEYsWUFBTWYsWUFBWSxLQUFLRyxLQUFMLENBQVdZLE9BQVgsR0FBcUJDLEVBQXJCLEVBQWxCO0FBQ0EsZUFBTyxLQUFLZixnQkFBTCxDQUFzQkQsU0FBdEIsQ0FBUDtBQUNEO0FBQ0QsYUFBTyxLQUFQO0FBQ0QiLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcmVcbiAqL1xuaW1wb3J0IHsgZXhwb3J0VG9WaWV3TW9kZWwgfSBmcm9tICdvY2MtY29tcG9uZW50cy93aWRnZXQtY29yZS9kZWNvcmF0b3JzJztcbmltcG9ydCB7IEJhc2VXaWRnZXQgfSBmcm9tICdvY2MtY29tcG9uZW50cy93aWRnZXQtY29yZSc7XG5cbi8qKlxuICogTGlicmFyaWVzLCBIZWxwZXJzXG4gKi9cbmltcG9ydCBrbyBmcm9tICdrbm9ja291dCc7XG5pbXBvcnQgc3RvcmFnZUFwaSBmcm9tICdzdG9yYWdlQXBpJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmNvbnN0IFNUT1JBR0VfS0VZID0gJ29lLXZhbG1vci1yZWNlbnRseS12aWV3ZWQtcHJvZHVjdHMnO1xuXG5leHBvcnQgY2xhc3Mgb2VWYWxtb3JSVlBNYW5hZ2VyIGV4dGVuZHMgQmFzZVdpZGdldCB7XG5cbiAgLyoqXG4gICAqIE9uIGxvYWQgdmlldyBtb2RlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQ29uc3RydWN0aW5nIHRoZSBCYXNlV2lkZ2V0XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2VBcGkuZ2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLnNldFRvcGljTGlzdGVuZXIoKTtcbiAgfVxuXG4gIGJlZm9yZUFwcGVhcigpIHtcbiAgICAvLyBTdG9yZSB0aGUgY3VycmVudCBwcm9kdWN0IGlkLCBpZiB0aGUgYWN0dWFsIHBhZ2UgaXMgYSBQRFBcbiAgICB0aGlzLnN0b3JlQ3VycmVudElmUHJvZHVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBzdG9yZWQgcHJvZHVjdHMgbGlzdFxuICAgKi9cbiAgZ2V0U3RvcmVkUHJvZHVjdHMoKSB7XG4gICAgY29uc3QgcHJvZHVjdExpc3QgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgcmV0dXJuIHByb2R1Y3RMaXN0ICYmIHByb2R1Y3RMaXN0ICE9PSAnJyA/IHByb2R1Y3RMaXN0LnNwbGl0KCc7JykgOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRvcGljIGxpc3RlbmVyXG4gICAqL1xuICBzZXRUb3BpY0xpc3RlbmVyKCkge1xuICAgICQuVG9waWMoJ09FX1ZBTE1PUl9SVlBfTkVXX1BST0RVQ1QnKS5zdWJzY3JpYmUoKHByb2R1Y3RJZCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmVQcm9kdWN0QnlJZChwcm9kdWN0SWQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3JlcyB0aGUgcHJvZHVjdCBJZFxuICAgKi9cbiAgc3RvcmVQcm9kdWN0QnlJZChwcm9kdWN0SWQpIHtcbiAgICBpZiAocHJvZHVjdElkKSB7XG4gICAgICBjb25zdCBtYXhQcm9kdWN0cyA9IHRoaXMuJGRhdGEubWF4SXRlbXMgJiYgdHlwZW9mIHRoaXMuJGRhdGEubWF4SXRlbXMgPT09ICdmdW5jdGlvbicgJiYgIWlzTmFOKHRoaXMuJGRhdGEubWF4SXRlbXMoKSkgPyBwYXJzZUludCh0aGlzLiRkYXRhLm1heEl0ZW1zKCksMTApIDogODtcbiAgICAgIGNvbnN0IHN0b3JlZFByb2R1Y3RzID0gW10uY29uY2F0KHByb2R1Y3RJZCwgdGhpcy5nZXRTdG9yZWRQcm9kdWN0cygpLmZpbHRlcigocElkKSA9PiBwSWQgIT09IHByb2R1Y3RJZCkpLnNsaWNlKDAsbWF4UHJvZHVjdHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBzdG9yZWRQcm9kdWN0cy5qb2luKCc7JykpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSWYgZGF0YSBpcyBkZWZpbmVkLCAkZGF0YS5wcm9kdWN0IGlzIGEgZnVuY3Rpb24gYW5kIGl0J3MgcmV0dXJuIGlzIG5vdCB1bmRlZmluZWQsIHN0b3JlcyB0aGUgcHJvZHVjdCBpZFxuICAgKi9cbiAgc3RvcmVDdXJyZW50SWZQcm9kdWN0KCkge1xuICAgIGlmICh0aGlzLiRkYXRhICYmIHR5cGVvZiB0aGlzLiRkYXRhLnByb2R1Y3QgPT09ICdmdW5jdGlvbicgJiYgdGhpcy4kZGF0YS5wcm9kdWN0KCkpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHRoaXMuJGRhdGEucHJvZHVjdCgpLmlkKCk7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZVByb2R1Y3RCeUlkKHByb2R1Y3RJZCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9Qcm9qZWN0cy9PYmplY3RFZGdlL09DQy9Qcm9qZWN0cy9vY2MtdHJhaW5uaW5nL3N0b3JlZnJvbnQvd2lkZ2V0cy9vYmplY3RlZGdlL29lVmFsbW9yUlZQTWFuYWdlci9qcy92aWV3LW1vZGVscy9vZVZhbG1vclJWUE1hbmFnZXIuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")}])});